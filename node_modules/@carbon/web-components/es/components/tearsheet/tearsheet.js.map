{"version":3,"file":"tearsheet.js","names":["LitElement","html","property","query","queryAssignedElements","state","prefix","HostListener","HostListenerMixin","styles","selectorTabbable","carbonElement","customElement","TEARSHEET_INFLUENCER_PLACEMENT","TEARSHEET_INFLUENCER_WIDTH","TEARSHEET_WIDTH","maxStackDepth","PRECEDING","Node","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_CONTAINS","FOLLOWING","DOCUMENT_POSITION_FOLLOWING","DOCUMENT_POSITION_CONTAINED_BY","blockClass","blockClassModalHeader","blockClassActionSet","tryFocusElems","elems","reverse","i","length","elem","focus","ownerDocument","activeElement","CDSTearsheet","_decorate","_initialize","_HostListenerMixin","constructor","args","F","d","kind","key","value","decorators","slot","selector","event","composedPath","indexOf","shadowRoot","preventCloseOnClickOutside","_handleUserInitiatedClose","target","relatedTarget","_this$shadowRoot","_topOfStack","open","_startSentinelNode","startSentinelNode","_endSentinelNode","endSentinelNode","oldContains","contains","currentContains","selectorTabbableForTearsheet","comparisonResult","compareDocumentPosition","_delay","querySelectorAll","_checkSetHasSlot","e","_t$assignedElements$l","_t$assignedElements","t","dataPostfix","getAttribute","postfix","hasName","name","replace","c","toUpperCase","assignedElements","_handleClickContainer","matches","selectorCloseButton","triggeredBy","init","bubbles","cancelable","composed","detail","dispatchEvent","CustomEvent","eventBeforeClose","eventClose","_handleSlugChange","childItems","_hasSlug","setAttribute","removeAttribute","reflect","attribute","type","Boolean","RIGHT","NARROW","String","_actions","width","_handleActionsChange","_actions$length","actions","actionsCount","_maxActions","_actionsCount","console","error","classList","add","_checkUpdateActionSizes","_stackDepth","_stackPosition","static","all","_stack","forEach","handler","Math","min","newDepth","newPosition","push","_handleStackChange","indexOpen","splice","_notifyStack","connectedCallback","_superPropGet","disconnectedCallback","indexAll","render","closeIconDescription","influencerPlacement","influencerWidth","actionsMultiple","headerFieldsTemplate","_t","_","_hasLabel","_hasTitle","_hasDescription","headerActionsTemplate","_t2","_hasHeaderActions","headerTemplate","_t3","hasCloseIcon","_hasHeaderNavigation","WIDE","_t4","_t5","_t6","_t7","ariaLabel","_isOpen","_t8","_hasInfluencerLeft","_t9","_hasInfluencerRight","_tearsheet","tearsheet","addEventListener","window","requestAnimationFrame","updated","changedProperties","has","process","env","NODE_ENV","_updateStack","_checkSetOpen","_launcher","focusNode","selectorInitialFocus","querySelector","ms","Promise","resolve","setTimeout"],"sources":["components/tearsheet/tearsheet.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2023, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { LitElement, html } from 'lit';\nimport {\n  property,\n  query,\n  queryAssignedElements,\n  state,\n} from 'lit/decorators.js';\nimport { prefix } from '../../globals/settings';\nimport HostListener from '../../globals/decorators/host-listener';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\nimport styles from './tearsheet.scss';\nimport { selectorTabbable } from '../../globals/settings';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\nimport '../button/index';\nimport '../layer/index';\nimport '../button/button-set-base';\nimport '../modal/index';\nimport {\n  TEARSHEET_INFLUENCER_PLACEMENT,\n  TEARSHEET_INFLUENCER_WIDTH,\n  TEARSHEET_WIDTH,\n} from './defs';\n\nexport {\n  TEARSHEET_INFLUENCER_PLACEMENT,\n  TEARSHEET_INFLUENCER_WIDTH,\n  TEARSHEET_WIDTH,\n};\n\nconst maxStackDepth = 3;\ntype StackHandler = (newDepth: number, newPosition: number) => void;\ninterface StackState {\n  open: StackHandler[];\n  all: StackHandler[];\n}\n\n// eslint-disable-next-line no-bitwise\nconst PRECEDING =\n  Node.DOCUMENT_POSITION_PRECEDING | Node.DOCUMENT_POSITION_CONTAINS;\n// eslint-disable-next-line no-bitwise\nconst FOLLOWING =\n  Node.DOCUMENT_POSITION_FOLLOWING | Node.DOCUMENT_POSITION_CONTAINED_BY;\n\nconst blockClass = `${prefix}--tearsheet`;\nconst blockClassModalHeader = `${prefix}--modal-header`;\nconst blockClassActionSet = `${prefix}--action-set`;\n\n/**\n * Tries to focus on the given elements and bails out if one of them is successful.\n *\n * @param elems The elements.\n * @param reverse `true` to go through the list in reverse order.\n * @returns `true` if one of the attempts is successful, `false` otherwise.\n */\nfunction tryFocusElems(elems: NodeListOf<HTMLElement>, reverse: boolean) {\n  if (!reverse) {\n    for (let i = 0; i < elems.length; ++i) {\n      const elem = elems[i];\n      elem.focus();\n      if (elem.ownerDocument!.activeElement === elem) {\n        return true;\n      }\n    }\n  } else {\n    for (let i = elems.length - 1; i >= 0; --i) {\n      const elem = elems[i];\n      elem.focus();\n      if (elem.ownerDocument!.activeElement === elem) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * Tearsheet.\n *\n * @element cds-tearsheet\n * @csspart dialog The dialog.\n * @fires cds-tearsheet-beingclosed\n *   The custom event fired before this tearsheet is being closed upon a user gesture.\n *   Cancellation of this event stops the user-initiated action of closing this tearsheet.\n * @fires cds-tearsheet-closed - The custom event fired after this tearsheet is closed upon a user gesture.\n */\n@customElement(`${prefix}-tearsheet`)\nclass CDSTearsheet extends HostListenerMixin(LitElement) {\n  /**\n   * The element that had focus before this tearsheet gets open.\n   */\n  private _launcher: Element | null = null;\n\n  /**\n   * Node to track focus going outside of tearsheet content.\n   */\n  @query('#start-sentinel')\n  private _startSentinelNode!: HTMLAnchorElement;\n\n  /**\n   * Node to track focus going outside of tearsheet content.\n   */\n  @query('#end-sentinel')\n  private _endSentinelNode!: HTMLAnchorElement;\n\n  /**\n   * Node to track tearsheet.\n   */\n  @query(`.${blockClass}__container`)\n  private _tearsheet!: HTMLDivElement;\n\n  @queryAssignedElements({ slot: 'actions', selector: `${prefix}-button` })\n  private _actions!: Array<HTMLElement>;\n\n  @state()\n  _actionsCount = 0;\n\n  @state()\n  _hasHeaderActions = false;\n\n  @state()\n  _hasLabel = false;\n\n  @state()\n  _hasSlug = false;\n\n  @state()\n  _hasTitle = false;\n\n  @state()\n  _hasDescription = false;\n\n  @state()\n  _hasInfluencerLeft = false;\n\n  @state()\n  _hasInfluencerRight = false;\n\n  @state()\n  _isOpen = false;\n\n  @state()\n  _hasHeaderNavigation = false;\n\n  /**\n   * Handles `click` event on this element.\n   *\n   * @param event The event.\n   */\n  @HostListener('click')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleClick = (event: MouseEvent) => {\n    if (\n      event.composedPath().indexOf(this.shadowRoot!) < 0 &&\n      !this.preventCloseOnClickOutside\n    ) {\n      this._handleUserInitiatedClose(event.target);\n    }\n  };\n\n  /**\n   * Handles `blur` event on this element.\n   *\n   * @param event The event.\n   * @param event.target The event target.\n   * @param event.relatedTarget The event relatedTarget.\n   */\n  @HostListener('shadowRoot:focusout')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleBlur = async ({ target, relatedTarget }: FocusEvent) => {\n    if (!this._topOfStack()) {\n      return;\n    }\n\n    const {\n      // condensedActions,\n      open,\n      _startSentinelNode: startSentinelNode,\n      _endSentinelNode: endSentinelNode,\n    } = this;\n\n    const oldContains = target !== this && this.contains(target as Node);\n    const currentContains =\n      relatedTarget !== this &&\n      (this.contains(relatedTarget as Node) ||\n        (this.shadowRoot?.contains(relatedTarget as Node) &&\n          relatedTarget !== (startSentinelNode as Node) &&\n          relatedTarget !== (endSentinelNode as Node)));\n\n    // Performs focus wrapping if _all_ of the following is met:\n    // * This tearsheet is open\n    // * The viewport still has focus\n    // * Tearsheet body used to have focus but no longer has focus\n    const { selectorTabbable: selectorTabbableForTearsheet } = this\n      .constructor as typeof CDSTearsheet;\n\n    if (open && relatedTarget && oldContains && !currentContains) {\n      const comparisonResult = (target as Node).compareDocumentPosition(\n        relatedTarget as Node\n      );\n      // eslint-disable-next-line no-bitwise\n      if (relatedTarget === startSentinelNode || comparisonResult & PRECEDING) {\n        await (this.constructor as typeof CDSTearsheet)._delay();\n        if (\n          !tryFocusElems(\n            this.querySelectorAll(selectorTabbableForTearsheet),\n            true\n          ) &&\n          relatedTarget !== this\n        ) {\n          this.focus();\n        }\n      }\n      // eslint-disable-next-line no-bitwise\n      else if (\n        relatedTarget === endSentinelNode ||\n        comparisonResult & FOLLOWING\n      ) {\n        await (this.constructor as typeof CDSTearsheet)._delay();\n        if (\n          !tryFocusElems(\n            this.querySelectorAll(selectorTabbableForTearsheet),\n            true\n          )\n        ) {\n          this.focus();\n        }\n      }\n    }\n  };\n\n  @HostListener('document:keydown')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  private _handleKeydown = ({ key, target }: KeyboardEvent) => {\n    if ((key === 'Esc' || key === 'Escape') && this._topOfStack()) {\n      this._handleUserInitiatedClose(target);\n    }\n  };\n\n  private _checkSetHasSlot(e: Event) {\n    const t = e.target as HTMLSlotElement;\n    const dataPostfix = t.getAttribute('data-postfix');\n    const postfix = dataPostfix ? `-${dataPostfix}` : '';\n\n    // snake `ab-cd-ef` to _has camel case _hasAbCdEf\n    const hasName = `_has-${t.name}${postfix}`.replace(/-./g, (c) =>\n      c[1].toUpperCase()\n    );\n    this[hasName] = (t?.assignedElements()?.length ?? 0) > 0;\n  }\n\n  /**\n   * Handles `click` event on the modal container.\n   *\n   * @param event The event.\n   */\n  private _handleClickContainer(event: MouseEvent) {\n    if (\n      (event.target as Element).matches(\n        (this.constructor as typeof CDSTearsheet).selectorCloseButton\n      )\n    ) {\n      this._handleUserInitiatedClose(event.target);\n    }\n  }\n\n  /**\n   * Handles user-initiated close request of this tearsheet.\n   *\n   * @param triggeredBy The element that triggered this close request.\n   */\n  private _handleUserInitiatedClose(triggeredBy: EventTarget | null) {\n    if (this.open) {\n      const init = {\n        bubbles: true,\n        cancelable: true,\n        composed: true,\n        detail: {\n          triggeredBy,\n        },\n      };\n      if (\n        this.dispatchEvent(\n          new CustomEvent(\n            (this.constructor as typeof CDSTearsheet).eventBeforeClose,\n            init\n          )\n        )\n      ) {\n        this.open = false;\n        this.dispatchEvent(\n          new CustomEvent(\n            (this.constructor as typeof CDSTearsheet).eventClose,\n            init\n          )\n        );\n      }\n    }\n  }\n\n  private _handleSlugChange(e: Event) {\n    const childItems = (e.target as HTMLSlotElement).assignedElements();\n\n    this._hasSlug = childItems.length > 0;\n    if (this._hasSlug) {\n      childItems[0].setAttribute('size', 'lg');\n      this.setAttribute('slug', '');\n    } else {\n      this.removeAttribute('slug');\n    }\n  }\n\n  /**\n   * Optional aria label for the tearsheet\n   */\n  @property({ reflect: true, attribute: 'aria-label' })\n  ariaLabel = '';\n\n  /**\n   * Sets the close button icon description\n   */\n  @property({ reflect: true, attribute: 'close-icon-description' })\n  closeIconDescription = 'Close';\n\n  /**\n   * Enable a close icon ('x') in the header area of the tearsheet. By default,\n   * (when this prop is omitted, or undefined or null) a tearsheet does not\n   * display a close icon if there are navigation actions (\"transactional\n   * tearsheet\") and displays one if there are no navigation actions (\"passive\n   * tearsheet\"), and that behavior can be overridden if required by setting\n   * this prop to either true or false.\n   */\n\n  @property({ reflect: true, type: Boolean, attribute: 'has-close-icon' })\n  hasCloseIcon = false;\n\n  /**\n   * The placement of the influencer section, 'left' or 'right'.\n   */\n  @property({ reflect: true, attribute: 'influencer-placement' })\n  influencerPlacement = TEARSHEET_INFLUENCER_PLACEMENT.RIGHT;\n\n  /**\n   * The width of the influencer section, 'narrow' or 'wide'.\n   */\n  @property({ reflect: true, attribute: 'influencer-width' })\n  influencerWidth = TEARSHEET_INFLUENCER_WIDTH.NARROW;\n\n  /**\n   * `true` if the tearsheet should be open.\n   */\n  @property({ type: Boolean, reflect: true })\n  open = false;\n\n  /**\n   * Prevent closing on click outside of tearsheet\n   */\n  @property({ type: Boolean, attribute: 'prevent-close-on-click-outside' })\n  preventCloseOnClickOutside = false;\n\n  /**\n   * The initial location of focus in the side panel\n   */\n  @property({\n    reflect: true,\n    attribute: 'selector-initial-focus',\n    type: String,\n  })\n  selectorInitialFocus;\n\n  /**\n   * The width of the influencer section, 'narrow' or 'wide'.\n   */\n  @property({ reflect: true, attribute: 'width' })\n  width = TEARSHEET_WIDTH.NARROW;\n\n  private _checkUpdateActionSizes = () => {\n    if (this._actions) {\n      for (let i = 0; i < this._actions.length; i++) {\n        this._actions[i].setAttribute(\n          'size',\n          this.width === 'wide' ? '2xl' : 'xl'\n        );\n      }\n    }\n  };\n\n  private _maxActions = 4;\n  private _handleActionsChange(e: Event) {\n    const target = e.target as HTMLSlotElement;\n    const actions = target?.assignedElements();\n    const actionsCount = actions?.length ?? 0;\n\n    if (actionsCount > this._maxActions) {\n      this._actionsCount = this._maxActions;\n      console.error(`Too many tearsheet actions, max ${this._maxActions}.`);\n    } else {\n      this._actionsCount = actionsCount;\n    }\n\n    for (let i = 0; i < actions?.length; i++) {\n      if (i + 1 > this._maxActions) {\n        // hide excessive tearsheet actions\n        actions[i].setAttribute('hidden', 'true');\n        actions[i].setAttribute(\n          `data-actions-limit-${this._maxActions}-exceeded`,\n          `${actions.length}`\n        );\n      } else {\n        actions[i].classList.add(`${blockClassActionSet}__action-button`);\n      }\n    }\n    this._checkUpdateActionSizes();\n  }\n\n  // Data structure to communicate the state of tearsheet stacking\n  // (i.e. when more than one tearsheet is open). Each tearsheet supplies a\n  // handler to be called whenever the stacking of the tearsheets changes, which\n  // happens when a tearsheet opens or closes. The 'open' array contains one\n  // handler per OPEN tearsheet ordered from lowest to highest in visual z-order.\n  // The 'all' array contains all the handlers for open and closed tearsheets.\n\n  @state()\n  _stackDepth = -1;\n\n  @state()\n  _stackPosition = -1;\n\n  private _topOfStack = () => {\n    return this._stackDepth === this._stackPosition;\n  };\n\n  private static _stack: StackState = {\n    open: [],\n    all: [],\n  };\n  private _notifyStack = () => {\n    CDSTearsheet._stack.all.forEach(\n      (handler: (stackSize: number, position: number) => void) => {\n        handler(\n          Math.min(CDSTearsheet._stack.open.length, maxStackDepth),\n          CDSTearsheet._stack.open.indexOf(handler) + 1\n        );\n      }\n    );\n  };\n\n  private _handleStackChange: StackHandler = (newDepth, newPosition) => {\n    this._stackDepth = newDepth;\n    this._stackPosition = newPosition;\n    if (this._stackDepth > 1 && this._stackPosition > 0) {\n      this.setAttribute('stack-position', `${newPosition}`);\n      this.setAttribute('stack-depth', `${this._stackDepth}`);\n    } else {\n      this.removeAttribute('stack-position');\n      this.removeAttribute('stack-depth');\n    }\n  };\n\n  private _updateStack = () => {\n    if (this.open) {\n      CDSTearsheet._stack.open.push(this._handleStackChange);\n    } else {\n      const indexOpen = CDSTearsheet._stack.open.indexOf(\n        this._handleStackChange\n      );\n      if (indexOpen >= 0) {\n        CDSTearsheet._stack.open.splice(indexOpen, 1);\n      }\n    }\n    this._notifyStack();\n  };\n\n  actionsMultiple = ['', 'single', 'double', 'triple'][this._actionsCount];\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    CDSTearsheet._stack.all.push(this._handleStackChange);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    const indexAll = CDSTearsheet._stack.all.indexOf(this._handleStackChange);\n    CDSTearsheet._stack.all.splice(indexAll, 1);\n    const indexOpen = CDSTearsheet._stack.all.indexOf(this._handleStackChange);\n    CDSTearsheet._stack.open.splice(indexOpen, 1);\n  }\n\n  render() {\n    const {\n      closeIconDescription,\n      influencerPlacement,\n      influencerWidth,\n      open,\n      width,\n    } = this;\n\n    const actionsMultiple = ['', 'single', 'double', 'triple'][\n      this._actionsCount\n    ];\n\n    const headerFieldsTemplate = html`<div\n      class=${`${blockClass}__header-fields`}>\n      <h2 class=${`${blockClassModalHeader}__label`} ?hidden=${!this._hasLabel}>\n        <slot name=\"label\" @slotchange=${this._checkSetHasSlot}></slot>\n      </h2>\n      <h3\n        class=${`${blockClassModalHeader}__heading ${blockClass}__heading`}\n        ?hidden=${!this._hasTitle}>\n        <slot name=\"title\" @slotchange=${this._checkSetHasSlot}></slot>\n      </h3>\n      <div\n        class=${`${blockClass}__header-description`}\n        ?hidden=${!this._hasDescription}>\n        <slot name=\"description\" @slotchange=${this._checkSetHasSlot}></slot>\n      </div>\n    </div>`;\n\n    const headerActionsTemplate = html` <div\n      class=${`${blockClass}__header-actions`}\n      ?hidden=${!this._hasHeaderActions || this.width === 'narrow'}>\n      <slot name=\"header-actions\" @slotchange=${this._checkSetHasSlot}></slot>\n    </div>`;\n\n    const headerTemplate = html` <cds-modal-header\n      class=${`${blockClass}__header`}\n      ?has-close-icon=${this.hasCloseIcon || this?._actionsCount === 0}\n      ?has-navigation=${this._hasHeaderNavigation && this.width === 'wide'}\n      ?has-header-actions=${this._hasHeaderActions && this.width === 'wide'}\n      ?has-actions=${this?._actionsCount > 0}\n      ?has-slug=${this?._hasSlug}\n      width=${width}>\n      ${this.width === TEARSHEET_WIDTH.WIDE\n        ? html`<cds-layer level=\"1\" class=${`${blockClass}__header-content`}\n            >${headerFieldsTemplate}${headerActionsTemplate}</cds-layer\n          >`\n        : html`<div>${headerFieldsTemplate}${headerActionsTemplate}</div>`}\n\n      <div\n        class=${`${blockClass}__header-navigation`}\n        ?hidden=${!this._hasHeaderNavigation || this.width === 'narrow'}>\n        <slot\n          name=\"header-navigation\"\n          @slotchange=${this._checkSetHasSlot}></slot>\n      </div>\n      <slot name=\"slug\" @slotchange=${this._handleSlugChange}></slot>\n      ${this.hasCloseIcon || this?._actionsCount === 0\n        ? html`<cds-modal-close-button\n            close-button-label=${closeIconDescription}\n            @click=${this._handleUserInitiatedClose}></cds-modal-close-button>`\n        : ''}\n    </cds-modal-header>`;\n\n    return html`\n      <a\n        id=\"start-sentinel\"\n        class=\"${prefix}--visually-hidden\"\n        href=\"javascript:void 0\"\n        role=\"navigation\"></a>\n      <div\n        aria-label=${this.ariaLabel}\n        class=${`${blockClass}__container ${prefix}--modal-container ${prefix}--modal-container--sm`}\n        part=\"dialog\"\n        role=\"complementary\"\n        ?open=${this._isOpen}\n        ?opening=${open && !this._isOpen}\n        ?closing=${!open && this._isOpen}\n        width=${width}\n        stack-position=${this._stackPosition}\n        stack-depth=${this._stackDepth}\n        @click=${this._handleClickContainer}>\n        <!-- Header -->\n        ${headerTemplate}\n\n        <!-- Body  -->\n        <cds-modal-body class=${`${blockClass}__body`} width=${width}>\n          <!-- Influencer when on left -->\n          ${influencerPlacement !== TEARSHEET_INFLUENCER_PLACEMENT.RIGHT\n            ? html`<div\n                class=${`${blockClass}__influencer`}\n                ?wide=${influencerWidth === 'wide'}\n                ?hidden=${!this._hasInfluencerLeft ||\n                this.width === TEARSHEET_WIDTH.NARROW}>\n                <slot\n                  name=\"influencer\"\n                  data-postfix=\"left\"\n                  @slotchange=${this._checkSetHasSlot}></slot>\n              </div>`\n            : ''}\n\n          <div class=${`${blockClass}__right`}>\n            <div class=${`${blockClass}__main`}>\n              <div class=${`${blockClass}__content`}>\n                <cds-layer level=\"0\">\n                  <slot></slot>\n                </cds-layer>\n              </div>\n\n              <!-- Influencer when on right -->\n              ${influencerPlacement === TEARSHEET_INFLUENCER_PLACEMENT.RIGHT\n                ? html`<div\n                    class=${`${blockClass}__influencer`}\n                    ?wide=${influencerWidth}\n                    ?hidden=${!this._hasInfluencerRight ||\n                    this.width === TEARSHEET_WIDTH.NARROW}>\n                    <slot\n                      name=\"influencer\"\n                      data-postfix=\"right\"\n                      @slotchange=${this._checkSetHasSlot}></slot>\n                  </div>`\n                : ''}\n            </div>\n            <!-- Action buttons -->\n            <cds-button-set-base\n              class=${`${blockClass}__buttons ${blockClass}__button-container`}\n              actions-multiple=${actionsMultiple}\n              ?tearsheet-wide=${width === 'wide'}\n              ?hidden=${this._actionsCount === 0}>\n              <slot\n                name=\"actions\"\n                @slotchange=${this._handleActionsChange}></slot>\n            </cds-button-set-base>\n          </div>\n        </cds-modal-body>\n      </div>\n      <a\n        id=\"end-sentinel\"\n        class=\"${prefix}--visually-hidden\"\n        href=\"javascript:void 0\"\n        role=\"navigation\"></a>\n    `;\n  }\n\n  _checkSetOpen = () => {\n    const { _tearsheet: tearsheet } = this;\n    if (tearsheet && this._isOpen) {\n      // wait until the tearsheet has transitioned off the screen to remove\n      tearsheet.addEventListener('transitionend', () => {\n        this._isOpen = false;\n      });\n    } else {\n      // allow the html to render before animating in the tearsheet\n      window.requestAnimationFrame(() => {\n        this._isOpen = this.open;\n      });\n    }\n  };\n\n  async updated(changedProperties) {\n    if (changedProperties.has('width')) {\n      this._checkUpdateActionSizes();\n    }\n\n    if (\n      process.env.NODE_ENV === 'development' &&\n      (changedProperties.has('width') ||\n        changedProperties.has('_hasHeaderNavigation') ||\n        changedProperties.has('_hasInfluencerLeft') ||\n        changedProperties.has('_hasInfluencerRight') ||\n        changedProperties.has('_hasHeaderActions'))\n    ) {\n      if (this.width === 'narrow') {\n        if (this._hasHeaderNavigation) {\n          console.error(\n            `Header navigation is not permitted in narrow Tearsheet.`\n          );\n        }\n        if (this._hasInfluencerLeft || this._hasInfluencerRight) {\n          console.error(`Influencer is not permitted in narrow Tearsheet.`);\n        }\n        if (this._hasHeaderActions) {\n          console.error(\n            `Header actions are not permitted in narrow Tearsheet.`\n          );\n        }\n      }\n    }\n\n    if (changedProperties.has('open')) {\n      this._updateStack();\n\n      this._checkSetOpen();\n      if (this.open) {\n        this._launcher = this.ownerDocument!.activeElement;\n        const focusNode =\n          this.selectorInitialFocus &&\n          this.querySelector(this.selectorInitialFocus);\n\n        await (this.constructor as typeof CDSTearsheet)._delay();\n        if (focusNode) {\n          // For cases where a `carbon-web-components` component (e.g. `<cds-button>`) being `primaryFocusNode`,\n          // where its first update/render cycle that makes it focusable happens after `<cds-tearsheet>`'s first update/render cycle\n          (focusNode as HTMLElement).focus();\n        } else if (\n          !tryFocusElems(\n            this.querySelectorAll(\n              (this.constructor as typeof CDSTearsheet).selectorTabbable\n            ),\n            true\n          )\n        ) {\n          this.focus();\n        }\n      } else if (\n        this._launcher &&\n        typeof (this._launcher as HTMLElement).focus === 'function'\n      ) {\n        (this._launcher as HTMLElement).focus();\n        this._launcher = null;\n      }\n    }\n  }\n\n  /**\n   * @param ms The number of milliseconds.\n   * @returns A promise that is resolves after the given milliseconds.\n   */\n  private static _delay(ms = 0) {\n    return new Promise((resolve) => {\n      setTimeout(resolve, ms);\n    });\n  }\n\n  /**\n   * A selector selecting buttons that should close this modal.\n   */\n  static get selectorCloseButton() {\n    return `[data-modal-close],${prefix}-modal-close-button`;\n  }\n\n  /**\n   * A selector selecting tabbable nodes.\n   */\n  static get selectorTabbable() {\n    return selectorTabbable;\n  }\n\n  /**\n   * The name of the custom event fired before this tearsheet is being closed upon a user gesture.\n   * Cancellation of this event stops the user-initiated action of closing this tearsheet.\n   */\n  static get eventBeforeClose() {\n    return `${prefix}-tearsheet-beingclosed`;\n  }\n\n  /**\n   * The name of the custom event fired after this tearsheet is closed upon a user gesture.\n   */\n  static get eventClose() {\n    return `${prefix}-tearsheet-closed`;\n  }\n\n  /**\n   * The name of the custom event fired on clicking the navigate back button\n   */\n  static get eventNavigateBack() {\n    return `${prefix}-tearsheet-header-navigate-back`;\n  }\n\n  static styles = styles; // `styles` here is a `CSSResult` generated by custom WebPack loader\n}\n\nexport default CDSTearsheet;\n"],"mappings":"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","ignoreList":[]}