{"version":3,"file":"progress-bar.js","names":["LitElement","html","property","carbonElement","customElement","classMap","ErrorFilled16","CheckmarkFilled16","PROGRESS_BAR_SIZE","PROGRESS_BAR_STATUS","PROGRESS_BAR_TYPE","prefix","styles","CDSProgressBar","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","decorators","type","String","attribute","reflect","key","value","Boolean","Number","BIG","ACTIVE","DEFAULT","max","status","cappedValue","ERROR","FINISHED","updated","changedProperties","has","_cappedValue","percentage","bar","shadowRoot","querySelector","style","transform","render","helperText","hideLabel","label","size","isFinished","isError","indeterminate","undefined","statusIcon","class","wrapperClasses","labelClasses","_t","_","_t2","static"],"sources":["components/progress-bar/progress-bar.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { LitElement, html } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\nimport { classMap } from 'lit/directives/class-map.js';\nimport ErrorFilled16 from '@carbon/icons/lib/error--filled/16';\nimport CheckmarkFilled16 from '@carbon/icons/lib/checkmark--filled/16';\nimport {\n  PROGRESS_BAR_SIZE,\n  PROGRESS_BAR_STATUS,\n  PROGRESS_BAR_TYPE,\n} from './defs';\nimport { prefix } from '../../globals/settings';\nimport styles from './progress-bar.scss';\n\nexport { PROGRESS_BAR_SIZE, PROGRESS_BAR_STATUS, PROGRESS_BAR_TYPE };\n\n/**\n * Progress bar.\n *\n * @element cds-progress-bar\n */\n@customElement(`${prefix}-progress-bar`)\nclass CDSProgressBar extends LitElement {\n  /**\n   * The current progress as a textual representation.\n   */\n  @property({ type: String, attribute: 'helper-text', reflect: true })\n  helperText;\n\n  /**\n   * Whether the label should be visually hidden.\n   */\n  @property({ type: Boolean, attribute: 'hide-label', reflect: true })\n  hideLabel;\n\n  /**\n   * A label describing the progress bar.\n   */\n  @property({ type: String })\n  label;\n\n  /**\n   * The maximum value.\n   */\n  @property({ type: Number, reflect: true })\n  max = 100;\n\n  /**\n   * Specify the size of the ProgressBar.\n   */\n  @property({ type: String, reflect: true })\n  size = PROGRESS_BAR_SIZE.BIG;\n\n  /**\n   * Specify the status.\n   */\n  @property({ type: String, reflect: true })\n  status = PROGRESS_BAR_STATUS.ACTIVE;\n\n  /**\n   * Defines the alignment variant of the progress bar.\n   */\n  @property({ type: String, reflect: true })\n  type = PROGRESS_BAR_TYPE.DEFAULT;\n\n  /**\n   * The current value.\n   */\n  @property({ type: Number, reflect: true })\n  value;\n\n  protected get _cappedValue() {\n    const { value, max, status } = this;\n\n    let cappedValue = value;\n    if (cappedValue > max) {\n      cappedValue = max;\n    }\n    if (cappedValue < 0) {\n      cappedValue = 0;\n    }\n    if (status === PROGRESS_BAR_STATUS.ERROR) {\n      cappedValue = 0;\n    } else if (status === PROGRESS_BAR_STATUS.FINISHED) {\n      cappedValue = max;\n    }\n\n    return cappedValue;\n  }\n\n  updated(changedProperties) {\n    if (\n      changedProperties.has('value') ||\n      changedProperties.has('max') ||\n      changedProperties.has('status')\n    ) {\n      const { _cappedValue: cappedValue, max, status } = this;\n\n      const percentage: number = cappedValue / max;\n\n      const bar = this.shadowRoot!.querySelector(\n        `.${prefix}--progress-bar__bar`\n      ) as HTMLElement;\n\n      if (\n        status != PROGRESS_BAR_STATUS.ERROR &&\n        status != PROGRESS_BAR_STATUS.FINISHED\n      ) {\n        bar.style.transform = `scaleX(${percentage})`;\n      } else {\n        bar.style.transform = 'none';\n      }\n    }\n  }\n\n  render() {\n    const {\n      _cappedValue: cappedValue,\n      helperText,\n      hideLabel,\n      label,\n      max,\n      size,\n      status,\n      type,\n      value,\n    } = this;\n\n    const isFinished = status === PROGRESS_BAR_STATUS.FINISHED;\n    const isError = status === PROGRESS_BAR_STATUS.ERROR;\n\n    const indeterminate =\n      !isFinished && !isError && (value === null || value === undefined);\n\n    let statusIcon = null;\n\n    if (isError) {\n      statusIcon = ErrorFilled16({\n        class: `${prefix}--progress-bar__status-icon`,\n      });\n    } else if (isFinished) {\n      statusIcon = CheckmarkFilled16({\n        class: `${prefix}--progress-bar__status-icon`,\n      });\n    }\n\n    const wrapperClasses = classMap({\n      [`${prefix}--progress-bar`]: true,\n      [`${prefix}--progress-bar--${size}`]: true,\n      [`${prefix}--progress-bar--${type}`]: true,\n      [`${prefix}--progress-bar--indeterminate`]: indeterminate,\n      [`${prefix}--progress-bar--finished`]: isFinished,\n      [`${prefix}--progress-bar--error`]: isError,\n    });\n\n    const labelClasses = classMap({\n      [`${prefix}--progress-bar__label`]: true,\n      [`${prefix}--visually-hidden`]: hideLabel,\n    });\n\n    return html` <div class=\"${wrapperClasses}\">\n      <div class=\"${labelClasses}\">\n        <span class=\"${prefix}--progress-bar__label-text\">${label}</span>\n        ${statusIcon}\n      </div>\n      <div\n        class=\"${prefix}--progress-bar__track\"\n        role=\"progressbar\"\n        aria-busy=\"${!isFinished}\"\n        aria-invalid=\"${isError}\"\n        aria-valuemin=\"${!indeterminate ? 0 : null}\"\n        aria-valuemax=\"${!indeterminate ? max : null}\"\n        aria-valuenow=\"${!indeterminate ? cappedValue : null}\">\n        <div class=\"${prefix}--progress-bar__bar\"></div>\n      </div>\n      ${helperText\n        ? html`<div class=\"${prefix}--progress-bar__helper-text\">\n            ${helperText}\n            <div class=\"${prefix}--visually-hidden\" aria-live=\"polite\">\n              ${isFinished ? 'Done' : 'Loading'}\n            </div>\n          </div>`\n        : null}\n    </div>`;\n  }\n\n  static styles = styles;\n}\n\nexport default CDSProgressBar;\n"],"mappings":"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","ignoreList":[]}