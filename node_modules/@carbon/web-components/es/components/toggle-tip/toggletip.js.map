{"version":3,"file":"toggletip.js","names":["classMap","html","LitElement","property","carbonElement","customElement","Information16","prefix","HostListener","HostListenerMixin","FocusMixin","POPOVER_ALIGNMENT","PopoverController","styles","CDSToggletip","_decorate","_initialize","_HostListenerMixin","constructor","args","F","d","kind","key","value","decorators","reflect","TOP","type","Boolean","_handleActionsSlotChange","target","hasContent","assignedNodes","setAttribute","removeAttribute","open","event","_handleFocusOut","contains","relatedTarget","_t","_","_t2","id","_handleClick","autoalign","_t3","_t4","_t5","_renderTooltipButton","_renderTooltipContent","updated","_this$shadowRoot","_this$shadowRoot2","_this$shadowRoot3","button","shadowRoot","querySelector","selectorToggletipButton","tooltip","selectorToggletipContent","arrowElement","selectorToggletipCaret","_this$popoverControll","popoverController","setPlacement","trigger","caret","flip","alignment","render","classes","_t6","_renderToggleTipLabel","_renderInnerContent","static","_objectSpread","shadowRootOptions","delegatesFocus"],"sources":["components/toggle-tip/toggletip.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { classMap } from 'lit/directives/class-map.js';\nimport { html, LitElement } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\nimport Information16 from '@carbon/icons/lib/information/16';\nimport { prefix } from '../../globals/settings';\nimport HostListener from '../../globals/decorators/host-listener';\nimport HostListenerMixin from '../../globals/mixins/host-listener';\nimport FocusMixin from '../../globals/mixins/focus';\nimport { POPOVER_ALIGNMENT } from '../popover/defs';\nimport PopoverController from '../../globals/controllers/popover-controller';\nimport styles from './toggletip.scss';\n\n/**\n * Definition tooltip.\n *\n * @element cds-toggletip\n */\n@customElement(`${prefix}-toggletip`)\nclass CDSToggletip extends HostListenerMixin(FocusMixin(LitElement)) {\n  /**\n   * Create popover controller instance\n   */\n  private popoverController = new PopoverController(this);\n\n  /**\n   * How the tooltip is aligned to the trigger button.\n   */\n  @property({ reflect: true })\n  alignment = POPOVER_ALIGNMENT.TOP;\n\n  /**\n   * Specify whether a auto align functionality should be applied\n   */\n  @property({ type: Boolean, reflect: true })\n  autoalign = false;\n\n  /**\n   * Set whether toggletip is open\n   */\n  @property({ type: Boolean, reflect: true })\n  open = false;\n\n  /**\n   * Handles `slotchange` event.\n   */\n  private _handleActionsSlotChange({ target }: Event) {\n    const hasContent = (target as HTMLSlotElement).assignedNodes();\n    hasContent\n      ? this.setAttribute('has-actions', '')\n      : this.removeAttribute('has-actions');\n  }\n\n  protected _handleClick = () => {\n    this.open = !this.open;\n  };\n\n  /**\n   * Handles `keydown` event on this element.\n   */\n  @HostListener('keydown')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  protected _handleKeydown = async (event) => {\n    if (event.key === 'Escape') {\n      this.open = false;\n    }\n  };\n\n  /**\n   * Handles `blur` event handler on the document this element is in.\n   *\n   * @param event The event.\n   */\n  @HostListener('focusout')\n  // @ts-ignore: The decorator refers to this method but TS thinks this method is not referred to\n  protected _handleFocusOut(event: FocusEvent) {\n    if (!this.contains(event.relatedTarget as Node)) {\n      this.open = false;\n    }\n  }\n\n  protected _renderToggleTipLabel = () => {\n    return html`\n      <span class=\"${prefix}--toggletip-label\">\n        <slot></slot>\n      </span>\n    `;\n  };\n\n  protected _renderTooltipButton = () => {\n    return html`\n      <button\n        aria-controls=\"${this.id}\"\n        class=\"${prefix}--toggletip-button\"\n        @click=${this._handleClick}>\n        ${Information16({ id: 'trigger' })}\n      </button>\n    `;\n  };\n\n  protected _renderTooltipContent = () => {\n    return this.autoalign\n      ? html`\n          <span class=\"${prefix}--popover-content\">\n            <div class=\"${prefix}--toggletip-content\">\n              <slot name=\"body-text\"></slot>\n              <div class=\"${prefix}--toggletip-actions\">\n                <slot\n                  name=\"actions\"\n                  @slotchange=\"${this._handleActionsSlotChange}\"></slot>\n              </div>\n            </div>\n            <span class=\"${prefix}--popover-caret\"></span>\n          </span>\n        `\n      : html`\n          <span class=\"${prefix}--popover\">\n            <span class=\"${prefix}--popover-content\">\n              <div class=\"${prefix}--toggletip-content\">\n                <slot name=\"body-text\"></slot>\n                <div class=\"${prefix}--toggletip-actions\">\n                  <slot\n                    name=\"actions\"\n                    @slotchange=\"${this._handleActionsSlotChange}\"></slot>\n                </div>\n              </div>\n            </span>\n            <span class=\"${prefix}--popover-caret\"></span>\n          </span>\n        `;\n  };\n\n  protected _renderInnerContent = () => {\n    return html`\n      ${this._renderTooltipButton()} ${this._renderTooltipContent()}\n    `;\n  };\n\n  updated() {\n    if (this.autoalign && this.open) {\n      // auto align functionality with @floating-ui/dom library\n      const button = this.shadowRoot?.querySelector(\n        CDSToggletip.selectorToggletipButton\n      );\n\n      const tooltip = this.shadowRoot?.querySelector(\n        CDSToggletip.selectorToggletipContent\n      );\n      const arrowElement = this.shadowRoot?.querySelector(\n        CDSToggletip.selectorToggletipCaret\n      );\n\n      if (button && tooltip) {\n        this.popoverController?.setPlacement({\n          trigger: button as HTMLElement,\n          target: tooltip as HTMLElement,\n          arrowElement: arrowElement as HTMLElement,\n          caret: true,\n          flip: true,\n          alignment: this.alignment,\n        });\n      }\n    }\n  }\n\n  render() {\n    const { alignment, open } = this;\n    const classes = classMap({\n      [`${prefix}--popover-container`]: true,\n      [`${prefix}--popover--caret`]: true,\n      [`${prefix}--popover--high-contrast`]: true,\n      [`${prefix}--popover--open`]: open,\n      [`${prefix}--popover--${alignment}`]: alignment,\n      [`${prefix}--toggletip`]: true,\n      [`${prefix}--toggletip--open`]: open,\n    });\n    return html`\n      ${this._renderToggleTipLabel()}\n      <span class=\"${classes}\">\n        ${this._renderInnerContent()}\n      </span>\n    </span>\n    `;\n  }\n\n  /**\n   * A selector that will return the toggletip content.\n   */\n  static get selectorToggletipContent() {\n    return `.${prefix}--popover-content`;\n  }\n\n  /**\n   * A selector that will return the toggletip caret.\n   */\n  static get selectorToggletipCaret() {\n    return `.${prefix}--popover-caret`;\n  }\n\n  /**\n   * A selector that will return the trigger element.\n   */\n  static get selectorToggletipButton() {\n    return `.${prefix}--toggletip-button`;\n  }\n\n  static shadowRootOptions = {\n    ...LitElement.shadowRootOptions,\n    delegatesFocus: true,\n  };\n\n  static styles = styles;\n}\n\nexport default CDSToggletip;\n"],"mappings":"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","ignoreList":[]}