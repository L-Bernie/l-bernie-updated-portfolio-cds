{"version":3,"file":"combo-box.js","names":["classMap","html","property","query","Close16","prefix","findIndex","forEach","CDSDropdown","DROPDOWN_KEYBOARD_ACTION","styles","carbonElement","customElement","ifDefined","ifNonEmpty","DROPDOWN_DIRECTION","DROPDOWN_SIZE","CDSComboBox","_decorate","_initialize","_CDSDropdown","constructor","args","F","d","kind","key","value","decorators","_testItemWithQueryText","item","itemMatches","_defaultItemMatches","_filterInputNode","queryText","textContent","toLowerCase","indexOf","_handleInput","_filterInputValue","length","setAttribute","removeAttribute","items","querySelectorAll","selectorItem","index","i","_this$_itemMenu","menuRect","_itemMenu","getBoundingClientRect","itemRect","isViewable","top","bottom","clientHeight","scrollTop","scrollBot","Math","abs","highlighted","filterInput","open","requestUpdate","_handleClickInner","event","_this$_selectionButto","target","_selectionButtonNode","contains","_handleUserInitiatedClearInput","_superPropGet","_handleKeypressInner","_this$_selectionButto2","action","getAction","TRIGGERING","focus","_handleUserInitiatedSelectItem","_selectionShouldChange","_selectionDidChange","itemToSelect","selectorItemSelected","selected","_handleUserInitiatedToggle","_renderLabel","disabled","inputLabel","label","readOnly","_activeDescendant","activeDescendant","filterInputValue","handleInput","inputClasses","activeDescendantFallback","_items$","id","_t","_","String","_renderFollowingLabel","clearSelectionLabel","undefined","_t2","attribute","shouldUpdate","changedProperties","_selectedItemContent","selectedItemContent","has","updated","_listBoxNode","listBoxNode","classList","add","static","Set"],"sources":["components/combo-box/combo-box.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { classMap } from 'lit/directives/class-map.js';\nimport { TemplateResult, html } from 'lit';\nimport { property, query } from 'lit/decorators.js';\nimport Close16 from '@carbon/icons/lib/close/16';\nimport { prefix } from '../../globals/settings';\nimport { findIndex, forEach } from '../../globals/internal/collection-helpers';\nimport CDSDropdown, { DROPDOWN_KEYBOARD_ACTION } from '../dropdown/dropdown';\nimport CDSComboBoxItem from './combo-box-item';\nimport styles from './combo-box.scss';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport ifNonEmpty from '../../globals/directives/if-non-empty';\n\nexport { DROPDOWN_DIRECTION, DROPDOWN_SIZE } from '../dropdown/dropdown';\n\n/**\n * Combo box.\n *\n * @element cds-combo-box\n * @fires cds-combo-box-beingselected\n *   The custom event fired before a combo box item is selected upon a user gesture.\n *   Cancellation of this event stops changing the user-initiated selection.\n * @fires cds-combo-box-beingtoggled\n *   The custom event fired before the open state of this combo box is toggled upon a user gesture.\n *   Cancellation of this event stops the user-initiated toggling.\n * @fires cds-combo-box-selected - The custom event fired after a combo box item is selected upon a user gesture.\n * @fires cds-combo-box-toggled - The custom event fired after the open state of this combo box is toggled upon a user gesture.\n */\n@customElement(`${prefix}-combo-box`)\nclass CDSComboBox extends CDSDropdown {\n  /**\n   * The text content that should be set to the `<input>` for filtering.\n   */\n  protected _filterInputValue = '';\n\n  protected _shouldTriggerBeFocusable = false;\n\n  /**\n   * The `<input>` for filtering.\n   */\n  @query('input')\n  private _filterInputNode!: HTMLInputElement;\n\n  /**\n   * The menu containing all selectable items.\n   */\n  @query('#menu-body')\n  private _itemMenu!: HTMLElement;\n\n  /**\n   * The selection button.\n   */\n  @query('#selection-button')\n  private _selectionButtonNode!: HTMLElement;\n\n  /**\n   * @param item A combo box item.\n   * @returns `true` if the given combo box item matches the query text user types.\n   */\n  protected _testItemWithQueryText(item) {\n    return (this.itemMatches || this._defaultItemMatches)(\n      item,\n      this._filterInputNode.value\n    );\n  }\n\n  /* eslint-disable class-methods-use-this */\n  /**\n   * The default item matching callback.\n   *\n   * @param item The combo box item.\n   * @param queryText The query text user types.\n   * @returns `true` if the given combo box item matches the given query text.\n   */\n  protected _defaultItemMatches(\n    item: CDSComboBoxItem,\n    queryText: string\n  ): boolean {\n    return (\n      item.textContent!.toLowerCase().indexOf(queryText.toLowerCase()) >= 0\n    );\n  }\n  /* eslint-enable class-methods-use-this */\n\n  /**\n   * Handles `input` event on the `<input>` for filtering.\n   */\n  protected _handleInput() {\n    if (this._filterInputValue.length != 0) {\n      this.setAttribute('isClosable', '');\n    } else {\n      this.removeAttribute('isClosable');\n    }\n\n    const items = this.querySelectorAll(\n      (this.constructor as typeof CDSComboBox).selectorItem\n    );\n    const index = !this._filterInputNode.value\n      ? -1\n      : findIndex(items, this._testItemWithQueryText, this);\n    forEach(items, (item, i) => {\n      if (i === index) {\n        const menuRect = this._itemMenu?.getBoundingClientRect();\n        const itemRect = item.getBoundingClientRect();\n\n        if (menuRect && itemRect) {\n          const isViewable =\n            menuRect!.top <= itemRect?.top &&\n            itemRect?.bottom <= menuRect?.top + this._itemMenu!.clientHeight;\n          if (!isViewable) {\n            const scrollTop = itemRect?.top - menuRect?.top;\n            const scrollBot = itemRect?.bottom - menuRect?.bottom;\n\n            if (Math.abs(scrollTop) < Math.abs(scrollBot)) {\n              this._itemMenu!.scrollTop += scrollTop;\n            } else {\n              this._itemMenu!.scrollTop += scrollBot;\n            }\n          }\n        }\n      }\n      (item as CDSComboBoxItem).highlighted = i === index;\n    });\n    const { _filterInputNode: filterInput } = this;\n    this._filterInputValue = !filterInput ? '' : filterInput.value;\n    this.open = true;\n    this.requestUpdate(); // If the only change is to `_filterInputValue`, auto-update doesn't happen\n  }\n\n  protected _handleClickInner(event: MouseEvent) {\n    const { target } = event as any;\n    if (this._selectionButtonNode?.contains(target)) {\n      this._handleUserInitiatedClearInput();\n    } else {\n      super._handleClickInner(event);\n    }\n  }\n\n  protected _handleKeypressInner(event: KeyboardEvent) {\n    const { key } = event;\n    const action = (this.constructor as typeof CDSDropdown).getAction(key);\n    const { TRIGGERING } = DROPDOWN_KEYBOARD_ACTION;\n    if (\n      this._selectionButtonNode?.contains(event.target as Node) &&\n      // Space key should be handled by `<input>` unless \"clear selection\" button has focus\n      (action === TRIGGERING || key === ' ')\n    ) {\n      this._handleUserInitiatedClearInput();\n    } else {\n      super._handleKeypressInner(event);\n    }\n  }\n\n  /**\n   * Handles user-initiated clearing the `<input>` for filtering.\n   */\n  protected _handleUserInitiatedClearInput() {\n    forEach(\n      this.querySelectorAll(\n        (this.constructor as typeof CDSComboBox).selectorItem\n      ),\n      (item) => {\n        (item as CDSComboBoxItem).highlighted = false;\n      }\n    );\n    this._filterInputValue = '';\n    this._filterInputNode.focus();\n    this._handleUserInitiatedSelectItem();\n  }\n\n  protected _handleUserInitiatedSelectItem(item?: CDSComboBoxItem) {\n    if (item && !this._selectionShouldChange(item)) {\n      // Escape hatch for `shouldUpdate()` logic that updates `._filterInputValue()` when selection changes,\n      // given we want to update the `<input>` and close the dropdown even if selection doesn't update.\n      // Use case:\n      // 1. Select the 2nd item in combo box drop down\n      // 2. Type some text in the `<input>`\n      // 3. Re-select the 2nd item in combo box drop down,\n      //    the `<input>` has to updated with the 2nd item and the dropdown should be closed,\n      //    even if there is no change in the selected value\n      this._filterInputValue = item.textContent || '';\n      this.open = false;\n      this.requestUpdate();\n    }\n    super._handleUserInitiatedSelectItem(item);\n  }\n\n  protected _selectionDidChange(itemToSelect?: CDSComboBoxItem) {\n    this.value = !itemToSelect ? '' : itemToSelect.value;\n    forEach(\n      this.querySelectorAll(\n        (this.constructor as typeof CDSDropdown).selectorItemSelected\n      ),\n      (item) => {\n        (item as CDSComboBoxItem).selected = false;\n        item.setAttribute('aria-selected', 'false');\n      }\n    );\n    if (itemToSelect) {\n      itemToSelect.selected = true;\n      itemToSelect.setAttribute('aria-selected', 'true');\n    }\n    this._handleUserInitiatedToggle(false);\n  }\n\n  protected _renderLabel(): TemplateResult {\n    const {\n      disabled,\n      inputLabel,\n      label,\n      open,\n      readOnly,\n      value,\n      _activeDescendant: activeDescendant,\n      _filterInputValue: filterInputValue,\n      _handleInput: handleInput,\n    } = this;\n\n    const inputClasses = classMap({\n      [`${prefix}--text-input`]: true,\n      [`${prefix}--text-input--empty`]: !value,\n    });\n\n    let activeDescendantFallback: string | undefined;\n    if (open && !activeDescendant) {\n      const constructor = this.constructor as typeof CDSDropdown;\n      const items = this.querySelectorAll(constructor.selectorItem);\n      activeDescendantFallback = items[0]?.id;\n    }\n\n    return html`\n      <input\n        id=\"trigger-button\"\n        class=\"${inputClasses}\"\n        ?disabled=${disabled}\n        placeholder=\"${label}\"\n        .value=${filterInputValue}\n        role=\"combobox\"\n        aria-label=\"${ifNonEmpty(inputLabel)}\"\n        aria-controls=\"menu-body\"\n        aria-haspopup=\"listbox\"\n        aria-autocomplete=\"list\"\n        aria-expanded=\"${String(open)}\"\n        aria-activedescendant=\"${ifDefined(\n          open ? activeDescendant ?? activeDescendantFallback : ''\n        )}\"\n        ?readonly=${readOnly}\n        @input=${handleInput} />\n    `;\n  }\n\n  protected _renderFollowingLabel(): TemplateResult | void {\n    const { clearSelectionLabel, _filterInputValue: filterInputValue } = this;\n\n    if (filterInputValue.length != 0) {\n      this.setAttribute('isClosable', '');\n    } else {\n      this.removeAttribute('isClosable');\n    }\n\n    return filterInputValue.length === 0\n      ? undefined\n      : html`\n          <div\n            id=\"selection-button\"\n            role=\"button\"\n            class=\"${prefix}--list-box__selection\"\n            tabindex=\"0\"\n            title=\"${clearSelectionLabel}\">\n            ${Close16({ 'aria-label': clearSelectionLabel })}\n          </div>\n        `;\n  }\n\n  /**\n   * The `aria-label` attribute for the icon to clear selection.\n   */\n  @property({ attribute: 'clear-selection-label' })\n  clearSelectionLabel = 'Clear selection';\n\n  /**\n   * The `aria-label` attribute for the `<input>` for filtering.\n   */\n  @property({ attribute: 'input-label' })\n  inputLabel = '';\n\n  /**\n   * The custom item matching callback.\n   */\n  @property({ attribute: false })\n  itemMatches!: (item: CDSComboBoxItem, queryText: string) => boolean;\n\n  shouldUpdate(changedProperties) {\n    super.shouldUpdate(changedProperties);\n    const { _selectedItemContent: selectedItemContent } = this;\n    if (selectedItemContent && changedProperties.has('value')) {\n      this._filterInputValue = selectedItemContent?.textContent || '';\n    }\n    return true;\n  }\n\n  updated(changedProperties) {\n    super.updated(changedProperties);\n    const { _listBoxNode: listBoxNode } = this;\n    if (listBoxNode) {\n      listBoxNode.classList.add(`${prefix}--combo-box`);\n    }\n  }\n\n  // For combo box, open/selection with space key is disabled given the input box should take it over\n  static TRIGGER_KEYS = new Set(['Enter']);\n\n  /**\n   * A selector that will return highlighted items.\n   */\n  static get selectorItemHighlighted() {\n    return `${prefix}-combo-box-item[highlighted]`;\n  }\n\n  /**\n   * A selector that will return combo box items.\n   */\n  static get selectorItem() {\n    return `${prefix}-combo-box-item`;\n  }\n\n  /**\n   * A selector that will return selected items.\n   */\n  static get selectorItemSelected() {\n    return `${prefix}-combo-box-item[selected]`;\n  }\n\n  /**\n   * The name of the custom event fired before this combo box item is being toggled upon a user gesture.\n   * Cancellation of this event stops the user-initiated action of toggling this combo box item.\n   */\n  static get eventBeforeToggle() {\n    return `${prefix}-combo-box-beingtoggled`;\n  }\n\n  /**\n   * The name of the custom event fired after this combo box item is toggled upon a user gesture.\n   */\n  static get eventToggle() {\n    return `${prefix}-combo-box-toggled`;\n  }\n\n  /**\n   * The name of the custom event fired before a combo box item is selected upon a user gesture.\n   * Cancellation of this event stops changing the user-initiated selection.\n   */\n  static get eventBeforeSelect() {\n    return `${prefix}-combo-box-beingselected`;\n  }\n\n  /**\n   * The name of the custom event fired after a a combo box item is selected upon a user gesture.\n   */\n  static get eventSelect() {\n    return `${prefix}-combo-box-selected`;\n  }\n\n  static styles = styles;\n}\n\nexport default CDSComboBox;\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,QAAQ,QAAQ,6BAA6B;AACtD,SAAyBC,IAAI,QAAQ,KAAK;AAC1C,SAASC,QAAQ,EAAEC,KAAK,QAAQ,mBAAmB;AACnD,OAAOC,OAAO,MAAM,sBAA4B;AAChD,SAASC,MAAM,QAAQ,wBAAwB;AAC/C,SAASC,SAAS,EAAEC,OAAO,QAAQ,2CAA2C;AAC9E,OAAOC,WAAW,IAAIC,wBAAwB,QAAQ,sBAAsB;AAE5E,OAAOC,MAAM,MAAM,sBAAkB;AACrC,SAASC,aAAa,IAAIC,aAAa,QAAQ,yCAAyC;AACxF,SAASC,SAAS,QAAQ,8BAA8B;AACxD,OAAOC,UAAU,MAAM,uCAAuC;AAE9D,SAASC,kBAAkB,EAAEC,aAAa,QAAQ,sBAAsB;;AAExE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA,IAcMC,WAAW,GAAAC,SAAA,EADhBN,aAAa,CAAC,GAAGP,MAAM,YAAY,CAAC,aAAAc,WAAA,EAAAC,YAAA;EAArC,MACMH,WAAW,SAAAG,YAAA,CAAqB;IAAAC,YAAA,GAAAC,IAAA;MAAA,SAAAA,IAAA;MAAAH,WAAA;IAAA;EA+UtC;EAAC;IAAAI,CAAA,EA/UKN,WAAW;IAAAO,CAAA;MAAAC,IAAA;MAAAC,GAAA;MAAAC,MAAA;QAAA,OAIe,EAAE;MAAA;IAAA;MAAAF,IAAA;MAAAC,GAAA;MAAAC,MAAA;QAAA,OAEM,KAAK;MAAA;IAAA;MAAAF,IAAA;MAAAG,UAAA,GAK1CzB,KAAK,CAAC,OAAO,CAAC;MAAAuB,GAAA;MAAAC,KAAA;IAAA;MAAAF,IAAA;MAAAG,UAAA,GAMdzB,KAAK,CAAC,YAAY,CAAC;MAAAuB,GAAA;MAAAC,KAAA;IAAA;MAAAF,IAAA;MAAAG,UAAA,GAMnBzB,KAAK,CAAC,mBAAmB,CAAC;MAAAuB,GAAA;MAAAC,KAAA;IAAA;MAAAF,IAAA;MAAAC,GAAA;MAAAC,KAAA;MAtB3B;AACF;AACA;;MAKE;AACF;AACA;;MAIE;AACF;AACA;;MAIE;AACF;AACA;;MAIE;AACF;AACA;AACA;MACE,SAAUE,sBAAsBA,CAACC,IAAI,EAAE;QACrC,OAAO,CAAC,IAAI,CAACC,WAAW,IAAI,IAAI,CAACC,mBAAmB,EAClDF,IAAI,EACJ,IAAI,CAACG,gBAAgB,CAACN,KACxB,CAAC;MACH;;MAEA;MACA;AACF;AACA;AACA;AACA;AACA;AACA;IANE;MAAAF,IAAA;MAAAC,GAAA;MAAAC,KAAA,EAOA,SAAUK,mBAAmBA,CAC3BF,IAAqB,EACrBI,SAAiB,EACR;QACT,OACEJ,IAAI,CAACK,WAAW,CAAEC,WAAW,CAAC,CAAC,CAACC,OAAO,CAACH,SAAS,CAACE,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC;MAEzE;MACA;;MAEA;AACF;AACA;IAFE;MAAAX,IAAA;MAAAC,GAAA;MAAAC,KAAA,EAGA,SAAUW,YAAYA,CAAA,EAAG;QACvB,IAAI,IAAI,CAACC,iBAAiB,CAACC,MAAM,IAAI,CAAC,EAAE;UACtC,IAAI,CAACC,YAAY,CAAC,YAAY,EAAE,EAAE,CAAC;QACrC,CAAC,MAAM;UACL,IAAI,CAACC,eAAe,CAAC,YAAY,CAAC;QACpC;QAEA,MAAMC,KAAK,GAAG,IAAI,CAACC,gBAAgB,CAChC,IAAI,CAACvB,WAAW,CAAwBwB,YAC3C,CAAC;QACD,MAAMC,KAAK,GAAG,CAAC,IAAI,CAACb,gBAAgB,CAACN,KAAK,GACtC,CAAC,CAAC,GACFrB,SAAS,CAACqC,KAAK,EAAE,IAAI,CAACd,sBAAsB,EAAE,IAAI,CAAC;QACvDtB,OAAO,CAACoC,KAAK,EAAE,CAACb,IAAI,EAAEiB,CAAC,KAAK;UAC1B,IAAIA,CAAC,KAAKD,KAAK,EAAE;YAAA,IAAAE,eAAA;YACf,MAAMC,QAAQ,IAAAD,eAAA,GAAG,IAAI,CAACE,SAAS,cAAAF,eAAA,uBAAdA,eAAA,CAAgBG,qBAAqB,CAAC,CAAC;YACxD,MAAMC,QAAQ,GAAGtB,IAAI,CAACqB,qBAAqB,CAAC,CAAC;YAE7C,IAAIF,QAAQ,IAAIG,QAAQ,EAAE;cACxB,MAAMC,UAAU,GACdJ,QAAQ,CAAEK,GAAG,KAAIF,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEE,GAAG,KAC9B,CAAAF,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEG,MAAM,KAAI,CAAAN,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEK,GAAG,IAAG,IAAI,CAACJ,SAAS,CAAEM,YAAY;cAClE,IAAI,CAACH,UAAU,EAAE;gBACf,MAAMI,SAAS,GAAG,CAAAL,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEE,GAAG,KAAGL,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEK,GAAG;gBAC/C,MAAMI,SAAS,GAAG,CAAAN,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEG,MAAM,KAAGN,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEM,MAAM;gBAErD,IAAII,IAAI,CAACC,GAAG,CAACH,SAAS,CAAC,GAAGE,IAAI,CAACC,GAAG,CAACF,SAAS,CAAC,EAAE;kBAC7C,IAAI,CAACR,SAAS,CAAEO,SAAS,IAAIA,SAAS;gBACxC,CAAC,MAAM;kBACL,IAAI,CAACP,SAAS,CAAEO,SAAS,IAAIC,SAAS;gBACxC;cACF;YACF;UACF;UACC5B,IAAI,CAAqB+B,WAAW,GAAGd,CAAC,KAAKD,KAAK;QACrD,CAAC,CAAC;QACF,MAAM;UAAEb,gBAAgB,EAAE6B;QAAY,CAAC,GAAG,IAAI;QAC9C,IAAI,CAACvB,iBAAiB,GAAG,CAACuB,WAAW,GAAG,EAAE,GAAGA,WAAW,CAACnC,KAAK;QAC9D,IAAI,CAACoC,IAAI,GAAG,IAAI;QAChB,IAAI,CAACC,aAAa,CAAC,CAAC,CAAC,CAAC;MACxB;IAAC;MAAAvC,IAAA;MAAAC,GAAA;MAAAC,KAAA,EAED,SAAUsC,iBAAiBA,CAACC,KAAiB,EAAE;QAAA,IAAAC,qBAAA;QAC7C,MAAM;UAAEC;QAAO,CAAC,GAAGF,KAAY;QAC/B,KAAAC,qBAAA,GAAI,IAAI,CAACE,oBAAoB,cAAAF,qBAAA,eAAzBA,qBAAA,CAA2BG,QAAQ,CAACF,MAAM,CAAC,EAAE;UAC/C,IAAI,CAACG,8BAA8B,CAAC,CAAC;QACvC,CAAC,MAAM;UACLC,aAAA,CAzGAvD,WAAW,iCAyGaiD,KAAK;QAC/B;MACF;IAAC;MAAAzC,IAAA;MAAAC,GAAA;MAAAC,KAAA,EAED,SAAU8C,oBAAoBA,CAACP,KAAoB,EAAE;QAAA,IAAAQ,sBAAA;QACnD,MAAM;UAAEhD;QAAI,CAAC,GAAGwC,KAAK;QACrB,MAAMS,MAAM,GAAI,IAAI,CAACtD,WAAW,CAAwBuD,SAAS,CAAClD,GAAG,CAAC;QACtE,MAAM;UAAEmD;QAAW,CAAC,GAAGpE,wBAAwB;QAC/C,IACE,CAAAiE,sBAAA,OAAI,CAACL,oBAAoB,cAAAK,sBAAA,eAAzBA,sBAAA,CAA2BJ,QAAQ,CAACJ,KAAK,CAACE,MAAc,CAAC;QACzD;QACCO,MAAM,KAAKE,UAAU,IAAInD,GAAG,KAAK,GAAG,CAAC,EACtC;UACA,IAAI,CAAC6C,8BAA8B,CAAC,CAAC;QACvC,CAAC,MAAM;UACLC,aAAA,CAxHAvD,WAAW,oCAwHgBiD,KAAK;QAClC;MACF;;MAEA;AACF;AACA;IAFE;MAAAzC,IAAA;MAAAC,GAAA;MAAAC,KAAA,EAGA,SAAU4C,8BAA8BA,CAAA,EAAG;QACzChE,OAAO,CACL,IAAI,CAACqC,gBAAgB,CAClB,IAAI,CAACvB,WAAW,CAAwBwB,YAC3C,CAAC,EACAf,IAAI,IAAK;UACPA,IAAI,CAAqB+B,WAAW,GAAG,KAAK;QAC/C,CACF,CAAC;QACD,IAAI,CAACtB,iBAAiB,GAAG,EAAE;QAC3B,IAAI,CAACN,gBAAgB,CAAC6C,KAAK,CAAC,CAAC;QAC7B,IAAI,CAACC,8BAA8B,CAAC,CAAC;MACvC;IAAC;MAAAtD,IAAA;MAAAC,GAAA;MAAAC,KAAA,EAED,SAAUoD,8BAA8BA,CAACjD,IAAsB,EAAE;QAC/D,IAAIA,IAAI,IAAI,CAAC,IAAI,CAACkD,sBAAsB,CAAClD,IAAI,CAAC,EAAE;UAC9C;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA,IAAI,CAACS,iBAAiB,GAAGT,IAAI,CAACK,WAAW,IAAI,EAAE;UAC/C,IAAI,CAAC4B,IAAI,GAAG,KAAK;UACjB,IAAI,CAACC,aAAa,CAAC,CAAC;QACtB;QACAQ,aAAA,CA3JEvD,WAAW,8CA2JwBa,IAAI;MAC3C;IAAC;MAAAL,IAAA;MAAAC,GAAA;MAAAC,KAAA,EAED,SAAUsD,mBAAmBA,CAACC,YAA8B,EAAE;QAC5D,IAAI,CAACvD,KAAK,GAAG,CAACuD,YAAY,GAAG,EAAE,GAAGA,YAAY,CAACvD,KAAK;QACpDpB,OAAO,CACL,IAAI,CAACqC,gBAAgB,CAClB,IAAI,CAACvB,WAAW,CAAwB8D,oBAC3C,CAAC,EACArD,IAAI,IAAK;UACPA,IAAI,CAAqBsD,QAAQ,GAAG,KAAK;UAC1CtD,IAAI,CAACW,YAAY,CAAC,eAAe,EAAE,OAAO,CAAC;QAC7C,CACF,CAAC;QACD,IAAIyC,YAAY,EAAE;UAChBA,YAAY,CAACE,QAAQ,GAAG,IAAI;UAC5BF,YAAY,CAACzC,YAAY,CAAC,eAAe,EAAE,MAAM,CAAC;QACpD;QACA,IAAI,CAAC4C,0BAA0B,CAAC,KAAK,CAAC;MACxC;IAAC;MAAA5D,IAAA;MAAAC,GAAA;MAAAC,KAAA,EAED,SAAU2D,YAAYA,CAAA,EAAmB;QACvC,MAAM;UACJC,QAAQ;UACRC,UAAU;UACVC,KAAK;UACL1B,IAAI;UACJ2B,QAAQ;UACR/D,KAAK;UACLgE,iBAAiB,EAAEC,gBAAgB;UACnCrD,iBAAiB,EAAEsD,gBAAgB;UACnCvD,YAAY,EAAEwD;QAChB,CAAC,GAAG,IAAI;QAER,MAAMC,YAAY,GAAG/F,QAAQ,CAAC;UAC5B,CAAC,GAAGK,MAAM,cAAc,GAAG,IAAI;UAC/B,CAAC,GAAGA,MAAM,qBAAqB,GAAG,CAACsB;QACrC,CAAC,CAAC;QAEF,IAAIqE,wBAA4C;QAChD,IAAIjC,IAAI,IAAI,CAAC6B,gBAAgB,EAAE;UAAA,IAAAK,OAAA;UAC7B,MAAM5E,WAAW,GAAG,IAAI,CAACA,WAAiC;UAC1D,MAAMsB,KAAK,GAAG,IAAI,CAACC,gBAAgB,CAACvB,WAAW,CAACwB,YAAY,CAAC;UAC7DmD,wBAAwB,IAAAC,OAAA,GAAGtD,KAAK,CAAC,CAAC,CAAC,cAAAsD,OAAA,uBAARA,OAAA,CAAUC,EAAE;QACzC;QAEA,OAAOjG,IAAI,CAAAkG,EAAA,KAAAA,EAAA,GAAAC,CAAA;AACf;AACA;AACA,iBAHe;AACf,oBADe;AACf,uBADe;AACf,iBADe;AACf;AACA,sBAFe;AACf;AACA;AACA;AACA,yBAJe;AACf,iCADe;AACf,oBADe;AACf,iBADe;AACf,KADe,GAGEL,YAAY,EACTR,QAAQ,EACLE,KAAK,EACXI,gBAAgB,EAEX/E,UAAU,CAAC0E,UAAU,CAAC,EAInBa,MAAM,CAACtC,IAAI,CAAC,EACJlD,SAAS,CAChCkD,IAAI,GAAG6B,gBAAgB,aAAhBA,gBAAgB,cAAhBA,gBAAgB,GAAII,wBAAwB,GAAG,EACxD,CAAC,EACWN,QAAQ,EACXI,WAAW;MAE1B;IAAC;MAAArE,IAAA;MAAAC,GAAA;MAAAC,KAAA,EAED,SAAU2E,qBAAqBA,CAAA,EAA0B;QACvD,MAAM;UAAEC,mBAAmB;UAAEhE,iBAAiB,EAAEsD;QAAiB,CAAC,GAAG,IAAI;QAEzE,IAAIA,gBAAgB,CAACrD,MAAM,IAAI,CAAC,EAAE;UAChC,IAAI,CAACC,YAAY,CAAC,YAAY,EAAE,EAAE,CAAC;QACrC,CAAC,MAAM;UACL,IAAI,CAACC,eAAe,CAAC,YAAY,CAAC;QACpC;QAEA,OAAOmD,gBAAgB,CAACrD,MAAM,KAAK,CAAC,GAChCgE,SAAS,GACTvG,IAAI,CAAAwG,GAAA,KAAAA,GAAA,GAAAL,CAAA;AACZ;AACA;AACA;AACA,qBAJY;AACZ;AACA,qBAFY;AACZ,cADY;AACZ;AACA,SAFY,GAIS/F,MAAM,EAENkG,mBAAmB,EAC1BnG,OAAO,CAAC;UAAE,YAAY,EAAEmG;QAAoB,CAAC,CAAC,CAEnD;MACP;;MAEA;AACF;AACA;IAFE;MAAA9E,IAAA;MAAAG,UAAA,GAGC1B,QAAQ,CAAC;QAAEwG,SAAS,EAAE;MAAwB,CAAC,CAAC;MAAAhF,GAAA;MAAAC,MAAA;QAAA,OAC3B,iBAAiB;MAAA;IAAA;MAAAF,IAAA;MAAAG,UAAA,GAKtC1B,QAAQ,CAAC;QAAEwG,SAAS,EAAE;MAAc,CAAC,CAAC;MAAAhF,GAAA;MAAAC,MAAA;QAAA,OAC1B,EAAE;MAAA;IAAA;MAAAF,IAAA;MAAAG,UAAA,GAKd1B,QAAQ,CAAC;QAAEwG,SAAS,EAAE;MAAM,CAAC,CAAC;MAAAhF,GAAA;MAAAC,KAAA;IAAA;MAAAF,IAAA;MAAAC,GAAA;MAAAC,KAAA;MAT/B;AACF;AACA;MAIE;AACF;AACA;MAIE,SAAAgF,YAAYA,CAACC,iBAAiB,EAAE;QAC9BpC,aAAA,CAxQEvD,WAAW,4BAwQM2F,iBAAiB;QACpC,MAAM;UAAEC,oBAAoB,EAAEC;QAAoB,CAAC,GAAG,IAAI;QAC1D,IAAIA,mBAAmB,IAAIF,iBAAiB,CAACG,GAAG,CAAC,OAAO,CAAC,EAAE;UACzD,IAAI,CAACxE,iBAAiB,GAAG,CAAAuE,mBAAmB,aAAnBA,mBAAmB,uBAAnBA,mBAAmB,CAAE3E,WAAW,KAAI,EAAE;QACjE;QACA,OAAO,IAAI;MACb;IAAC;MAAAV,IAAA;MAAAC,GAAA;MAAAC,KAAA,EAED,SAAAqF,OAAOA,CAACJ,iBAAiB,EAAE;QACzBpC,aAAA,CAjREvD,WAAW,uBAiRC2F,iBAAiB;QAC/B,MAAM;UAAEK,YAAY,EAAEC;QAAY,CAAC,GAAG,IAAI;QAC1C,IAAIA,WAAW,EAAE;UACfA,WAAW,CAACC,SAAS,CAACC,GAAG,CAAC,GAAG/G,MAAM,aAAa,CAAC;QACnD;MACF;;MAEA;IAAA;MAAAoB,IAAA;MAAA4F,MAAA;MAAA3F,GAAA;MAAAC,MAAA;QAAA,OACsB,IAAI2F,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC;MAAA;IAAA;MAAA7F,IAAA;MAAA4F,MAAA;MAAA3F,GAAA;MAAAC,KAAA;MAExC;AACF;AACA;MACE,SAAAA,CAAA,EAAqC;QACnC,OAAO,GAAGtB,MAAM,8BAA8B;MAChD;;MAEA;AACF;AACA;IAFE;MAAAoB,IAAA;MAAA4F,MAAA;MAAA3F,GAAA;MAAAC,KAAA,EAGA,SAAAA,CAAA,EAA0B;QACxB,OAAO,GAAGtB,MAAM,iBAAiB;MACnC;;MAEA;AACF;AACA;IAFE;MAAAoB,IAAA;MAAA4F,MAAA;MAAA3F,GAAA;MAAAC,KAAA,EAGA,SAAAA,CAAA,EAAkC;QAChC,OAAO,GAAGtB,MAAM,2BAA2B;MAC7C;;MAEA;AACF;AACA;AACA;IAHE;MAAAoB,IAAA;MAAA4F,MAAA;MAAA3F,GAAA;MAAAC,KAAA,EAIA,SAAAA,CAAA,EAA+B;QAC7B,OAAO,GAAGtB,MAAM,yBAAyB;MAC3C;;MAEA;AACF;AACA;IAFE;MAAAoB,IAAA;MAAA4F,MAAA;MAAA3F,GAAA;MAAAC,KAAA,EAGA,SAAAA,CAAA,EAAyB;QACvB,OAAO,GAAGtB,MAAM,oBAAoB;MACtC;;MAEA;AACF;AACA;AACA;IAHE;MAAAoB,IAAA;MAAA4F,MAAA;MAAA3F,GAAA;MAAAC,KAAA,EAIA,SAAAA,CAAA,EAA+B;QAC7B,OAAO,GAAGtB,MAAM,0BAA0B;MAC5C;;MAEA;AACF;AACA;IAFE;MAAAoB,IAAA;MAAA4F,MAAA;MAAA3F,GAAA;MAAAC,KAAA,EAGA,SAAAA,CAAA,EAAyB;QACvB,OAAO,GAAGtB,MAAM,qBAAqB;MACvC;IAAC;MAAAoB,IAAA;MAAA4F,MAAA;MAAA3F,GAAA;MAAAC,MAAA;QAAA,OAEejB,MAAM;MAAA;IAAA;EAAA;AAAA,GA9UEF,WAAW;AAiVrC,eAAeS,WAAW","ignoreList":[]}