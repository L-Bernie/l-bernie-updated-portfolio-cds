{"version":3,"file":"multi-select.js","names":["html","property","query","classMap","Close16","prefix","filter","forEach","indexOf","CDSDropdown","DROPDOWN_KEYBOARD_ACTION","DROPDOWN_TYPE","SELECTION_FEEDBACK_OPTION","styles","carbonElement","customElement","DROPDOWN_SIZE","DROPDOWN_DIRECTION","CDSMultiSelect","_decorate","_initialize","_CDSDropdown","constructor","args","F","d","kind","decorators","type","Boolean","key","value","_selectionShouldChange","itemToSelect","_selectionDidChange","selected","querySelectorAll","selectorItemSelected","item","_handleUserInitiatedToggle","selectorItem","map","join","_handleClickInner","event","_this$_selectionButto","_this$_clearButtonNod","_event$target","_selectionButtonNode","contains","target","readOnly","_handleUserInitiatedSelectItem","filterable","_filterInputNode","focus","_triggerNode","_clearButtonNode","_handleUserInitiatedClearInput","matches","slugItem","_superPropGet","_handleKeypressInner","_this$_clearButtonNod2","_this$_selectionButto2","action","getAction","TRIGGERING","open","_handleKeypressInnerFlterable","highlightedItem","querySelector","selectorItemHighlighted","_renderTitleLabel","clearSelectionDescription","clearSelectionText","disabled","hideLabel","titleText","_selectedItemsCount","selectedItemsCount","_slotTitleTextNode","slotTitleTextNode","_handleSlotchangeLabelText","handleSlotchangeLabelText","labelClasses","hasTitleText","assignedNodes","length","_t","_","_t2","_renderPrecedingLabel","clearSelectionLabel","selectionButtonClasses","undefined","_t3","class","_renderLabel","label","_selectedItemContent","selectedItemContent","inputClasses","_t4","_t5","_handleInput","_renderFollowingLabel","filterInputNode","_t6","items","inputValue","toLocaleLowerCase","itemValue","innerText","includes","setAttribute","removeAttribute","requestUpdate","_navigate","direction","selectorItemResults","highlightedIndex","nextIndex","i","highlighted","selectorItemFiltered","attribute","TOP_AFTER_REOPEN","size","invalid","warn","inline","INLINE","itemA","itemB","locale","localeCompare","numeric","menuItems","values","compareItems","menuItemsArray","Array","from","sortedArray","sort","hasItemA","hasItemB","shouldUpdate","changedProperties","slug","split","has","elem","selectionFeedback","TOP","sortedMenuItems","sortItems","unshift","replaceChildren","updated","_menuBodyNode","connectedCallback","static"],"sources":["components/multi-select/multi-select.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2020, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { html, TemplateResult } from 'lit';\nimport { property, query } from 'lit/decorators.js';\nimport { classMap } from 'lit/directives/class-map.js';\nimport Close16 from '@carbon/icons/lib/close/16';\nimport { prefix } from '../../globals/settings';\nimport {\n  filter,\n  forEach,\n  indexOf,\n} from '../../globals/internal/collection-helpers';\nimport CDSDropdown, {\n  DROPDOWN_KEYBOARD_ACTION,\n  DROPDOWN_TYPE,\n} from '../dropdown/dropdown';\nimport { SELECTION_FEEDBACK_OPTION } from './defs';\nimport CDSMultiSelectItem from './multi-select-item';\nimport styles from './multi-select.scss';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\n\nexport {\n  DROPDOWN_SIZE,\n  DROPDOWN_TYPE,\n  DROPDOWN_DIRECTION,\n} from '../dropdown/dropdown';\n\nexport { SELECTION_FEEDBACK_OPTION };\n\n/**\n * Multi select.\n *\n * @element cds-multi-select\n * @fires cds-multi-select-beingselected\n *   The custom event fired before a multi select item is selected upon a user gesture.\n *   Cancellation of this event stops changing the user-initiated selection.\n * @fires cds-multi-select-selected - The custom event fired after a multi select item is selected upon a user gesture.\n * @fires cds-multi-select-beingtoggled\n *   The custom event fired before the open state of this multi select is toggled upon a user gesture.\n *   Cancellation of this event stops the user-initiated toggling.\n * @fires cds-multi-select-toggled\n *   The custom event fired after the open state of this multi select is toggled upon a user gesture.\n */\n@customElement(`${prefix}-multi-select`)\nclass CDSMultiSelect extends CDSDropdown {\n  @property({ type: Boolean })\n  filterable;\n\n  /**\n   * The count of selected items.\n   */\n  private _selectedItemsCount = 0;\n\n  /**\n   * The clear button.\n   */\n  @query('#clear-button')\n  private _clearButtonNode!: HTMLElement;\n\n  /**\n   * The selection button.\n   */\n  @query('#selection-button')\n  private _selectionButtonNode!: HTMLElement;\n\n  /**\n   * The menu body.\n   */\n  @query('#menu-body')\n  private _menuBodyNode!: HTMLElement;\n\n  /**\n   * The `<input>` for filtering.\n   */\n  @query('input')\n  private _filterInputNode!: HTMLInputElement;\n\n  /**\n   * The trigger button.\n   */\n  @query(`.${prefix}--list-box__field`)\n  private _triggerNode!: HTMLElement;\n\n  protected _selectionShouldChange(itemToSelect?: CDSMultiSelectItem) {\n    // If we are selecting an item, assumes we always toggle\n    return Boolean(this.value || itemToSelect);\n  }\n\n  protected _selectionDidChange(itemToSelect?: CDSMultiSelectItem) {\n    if (itemToSelect) {\n      itemToSelect.selected = !itemToSelect.selected;\n    } else {\n      forEach(\n        this.querySelectorAll(\n          (this.constructor as typeof CDSMultiSelect).selectorItemSelected\n        ),\n        (item) => {\n          (item as CDSMultiSelectItem).selected = false;\n        }\n      );\n      this._handleUserInitiatedToggle(false);\n    }\n    // Change in `.selected` hasn't been reflected to the corresponding attribute yet\n    this.value = filter(\n      this.querySelectorAll(\n        (this.constructor as typeof CDSMultiSelect).selectorItem\n      ),\n      (item) => (item as CDSMultiSelectItem).selected\n    )\n      .map((item) => (item as CDSMultiSelectItem).value)\n      .join(',');\n  }\n\n  protected _handleClickInner(event: MouseEvent) {\n    if (\n      this._selectionButtonNode?.contains(event.target as Node) &&\n      !this.readOnly\n    ) {\n      this._handleUserInitiatedSelectItem();\n      if (this.filterable) {\n        this._filterInputNode.focus();\n      } else {\n        this._triggerNode.focus();\n      }\n    } else if (this._clearButtonNode?.contains(event.target as Node)) {\n      this._handleUserInitiatedClearInput();\n    } else if (\n      !(event.target as HTMLElement)?.matches(\n        (this.constructor as typeof CDSMultiSelect).slugItem\n      )\n    ) {\n      super._handleClickInner(event);\n      if (this.filterable) {\n        this._filterInputNode.focus();\n      }\n    }\n  }\n\n  /**\n   * Handler for the `keypress` event, ensures filter still works upon entering space\n   */\n  protected _handleKeypressInner(event: KeyboardEvent) {\n    const { key } = event;\n    const action = (this.constructor as typeof CDSDropdown).getAction(key);\n    const { TRIGGERING } = DROPDOWN_KEYBOARD_ACTION;\n\n    if (\n      this._clearButtonNode?.contains(event.target as Node) &&\n      // Space key should be handled by `<input>` unless \"clear selection\" button has focus\n      (action === TRIGGERING || key === ' ')\n    ) {\n      this._handleUserInitiatedClearInput();\n    } else if (this._selectionButtonNode?.contains(event.target as Node)) {\n      this._handleUserInitiatedSelectItem();\n      this.open = true;\n      if (this.filterable) {\n        this._filterInputNode.focus();\n      } else {\n        this._triggerNode.focus();\n      }\n    } else if (this.filterable) {\n      this._handleKeypressInnerFlterable(event);\n    } else {\n      super._handleKeypressInner(event);\n    }\n  }\n\n  /**\n   * Special andler for the `keypress` event, ensures space selection for filterable\n   * variation is disabled\n   */\n\n  protected _handleKeypressInnerFlterable(event: KeyboardEvent) {\n    const { key } = event;\n    const action = (this.constructor as typeof CDSDropdown).getAction(key);\n    if (!this.open) {\n      switch (action) {\n        case DROPDOWN_KEYBOARD_ACTION.TRIGGERING:\n          this._handleUserInitiatedToggle(true);\n          break;\n        default:\n          break;\n      }\n    } else {\n      switch (key) {\n        case 'Enter':\n          {\n            const constructor = this.constructor as typeof CDSDropdown;\n            const highlightedItem = this.querySelector(\n              constructor.selectorItemHighlighted\n            ) as CDSMultiSelectItem;\n            if (highlightedItem) {\n              this._handleUserInitiatedSelectItem(highlightedItem);\n            } else {\n              this._handleUserInitiatedToggle(false);\n            }\n          }\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n  protected _renderTitleLabel() {\n    const {\n      clearSelectionDescription,\n      clearSelectionText,\n      disabled,\n      hideLabel,\n      titleText,\n      _selectedItemsCount: selectedItemsCount,\n      _slotTitleTextNode: slotTitleTextNode,\n      _handleSlotchangeLabelText: handleSlotchangeLabelText,\n    } = this;\n\n    const labelClasses = classMap({\n      [`${prefix}--label`]: true,\n      [`${prefix}--label--disabled`]: disabled,\n      [`${prefix}--visually-hidden`]: hideLabel,\n    });\n\n    const hasTitleText =\n      titleText ||\n      (slotTitleTextNode && slotTitleTextNode.assignedNodes().length > 0);\n\n    return html`\n      <label\n        part=\"title-text\"\n        class=\"${labelClasses}\"\n        ?hidden=\"${!hasTitleText}\">\n        <slot name=\"title-text\" @slotchange=\"${handleSlotchangeLabelText}\"\n          >${titleText}</slot\n        >\n        ${selectedItemsCount > 0\n          ? html`\n              <span class=\"${prefix}--visually-hidden\">\n                ${clearSelectionDescription} ${selectedItemsCount},\n                ${clearSelectionText}\n              </span>\n            `\n          : null}\n      </label>\n    `;\n  }\n\n  protected _renderPrecedingLabel() {\n    const {\n      disabled,\n      readOnly,\n      clearSelectionLabel,\n      _selectedItemsCount: selectedItemsCount,\n    } = this;\n\n    const selectionButtonClasses = classMap({\n      [`${prefix}--list-box__selection`]: true,\n      [`${prefix}--list-box__selection--multi`]: true,\n      [`${prefix}--tag`]: true,\n      [`${prefix}--tag--filter`]: true,\n      [`${prefix}--tag--high-contrast`]: true,\n      [`${prefix}--tag--disabled`]: disabled,\n    });\n    return selectedItemsCount === 0\n      ? undefined\n      : html`\n          <div\n            id=\"selection-button\"\n            role=\"button\"\n            class=\"${selectionButtonClasses}\"\n            tabindex=\"-1\"\n            aria-disabled=${readOnly}\n            title=\"${clearSelectionLabel}\">\n            ${selectedItemsCount}\n            ${Close16({\n              'aria-label': clearSelectionLabel,\n              class: `${prefix}--tag__close-icon`,\n            })}\n          </div>\n        `;\n  }\n\n  /**\n    @returns The main content of the trigger button.\n   */\n  protected _renderLabel(): TemplateResult {\n    const { label, value, _selectedItemContent: selectedItemContent } = this;\n\n    const inputClasses = classMap({\n      [`${prefix}--text-input`]: true,\n      [`${prefix}--text-input--empty`]: !value,\n    });\n\n    return !this.filterable\n      ? html`\n          <span id=\"trigger-label\" class=\"${prefix}--list-box__label\"\n            >${selectedItemContent || label}</span\n          >\n        `\n      : html`\n          <input\n            id=\"trigger-label\"\n            class=\"${inputClasses}\"\n            placeholder=\"${label}\"\n            role=\"combobox\"\n            aria-controls=\"menu-body\"\n            aria-autocomplete=\"list\"\n            @input=\"${this._handleInput}\" />\n        `;\n  }\n\n  protected _renderFollowingLabel(): TemplateResult | void {\n    const { clearSelectionLabel, _filterInputNode: filterInputNode } = this;\n    return filterInputNode &&\n      filterInputNode.value.length > 0 &&\n      this.filterable\n      ? html`\n          <div\n            id=\"clear-button\"\n            role=\"button\"\n            class=\"${prefix}--list-box__selection\"\n            tabindex=\"0\"\n            title=\"${clearSelectionLabel}\">\n            ${Close16({ 'aria-label': clearSelectionLabel })}\n          </div>\n        `\n      : undefined;\n  }\n\n  /**\n   * Handles `input` event on the `<input>` for filtering.\n   */\n  protected _handleInput() {\n    const items = this.querySelectorAll(\n      (this.constructor as typeof CDSMultiSelect).selectorItem\n    );\n    const inputValue = this._filterInputNode.value.toLocaleLowerCase();\n\n    if (!this.open) {\n      this.open = true;\n    }\n\n    forEach(items, (item) => {\n      const itemValue = (item as HTMLElement).innerText.toLocaleLowerCase();\n\n      if (!itemValue.includes(inputValue)) {\n        (item as CDSMultiSelectItem).setAttribute('filtered', '');\n        (item as CDSMultiSelectItem).removeAttribute('highlighted');\n      } else {\n        (item as CDSMultiSelectItem).removeAttribute('filtered');\n      }\n    });\n\n    this.requestUpdate();\n  }\n\n  /**\n   * Navigate through dropdown items.\n   *\n   * @param direction `-1` to navigate backward, `1` to navigate forward.\n   */\n  protected _navigate(direction: number) {\n    if (!this.filterable) {\n      super._navigate(direction);\n    } else {\n      // only navigate through remaining item\n      const constructor = this.constructor as typeof CDSMultiSelect;\n      const items = this.querySelectorAll(constructor.selectorItemResults);\n      const highlightedItem = this.querySelector(\n        constructor.selectorItemHighlighted\n      );\n      const highlightedIndex = indexOf(items, highlightedItem!);\n\n      let nextIndex = highlightedIndex + direction;\n      if (nextIndex < 0) {\n        nextIndex = items.length - 1;\n      }\n      if (nextIndex >= items.length) {\n        nextIndex = 0;\n      }\n      forEach(items, (item, i) => {\n        (item as CDSMultiSelectItem).highlighted = i === nextIndex;\n      });\n    }\n  }\n\n  /**\n   * Handles user-initiated clearing the `<input>` for filtering.\n   */\n  protected _handleUserInitiatedClearInput() {\n    const constructor = this.constructor as typeof CDSMultiSelect;\n    const items = this.querySelectorAll(constructor.selectorItemFiltered);\n    this._filterInputNode.value = '';\n    this.open = true;\n    this._filterInputNode.focus();\n    forEach(items, (item) => {\n      (item as CDSMultiSelectItem).removeAttribute('filtered');\n    });\n  }\n\n  /**\n   * The `aria-label` attribute for the icon to clear selection.\n   */\n  @property({ attribute: 'clear-selection-label' })\n  clearSelectionLabel = '';\n\n  /**\n   * Specify the text that should be read for screen readers that describes total items selected\n   */\n  @property({ attribute: 'clear-selection-description' })\n  clearSelectionDescription = 'Total items selected: ';\n\n  /**\n   * Specify the text that should be read for screen readers to clear selection.\n   */\n  @property({ attribute: 'clear-selection-text' })\n  clearSelectionText = 'To clear selection, press Delete or Backspace.';\n\n  /**\n   * Specify the locale of the control. Used for the default compareItems used for sorting the list of items in the control.\n   */\n  @property()\n  locale = 'en';\n\n  /**\n   * Specify feedback (mode) of the selection.\n   * `top`: selected item jumps to top\n   * `fixed`: selected item stays at it's position\n   * `top-after-reopen`: selected item jump to top after reopen dropdown\n   */\n  @property({ attribute: 'selection-feedback' })\n  selectionFeedback = SELECTION_FEEDBACK_OPTION.TOP_AFTER_REOPEN;\n\n  /**\n   * The CSS class list for multi-select listbox\n   */\n  protected get _classes() {\n    const {\n      disabled,\n      size,\n      type,\n      invalid,\n      readOnly,\n      open,\n      warn,\n      _selectedItemsCount: selectedItemsCount,\n    } = this;\n    const inline = type === DROPDOWN_TYPE.INLINE;\n\n    return classMap({\n      [`${prefix}--multi-select`]: true,\n      [`${prefix}--list-box`]: true,\n      [`${prefix}--list-box--disabled`]: disabled,\n      [`${prefix}--list-box--inline`]: inline,\n      [`${prefix}--list-box--expanded`]: open,\n      [`${prefix}--list-box--${size}`]: size,\n      [`${prefix}--multi-select--invalid`]: invalid,\n      [`${prefix}--multi-select--warn`]: warn,\n      [`${prefix}--multi-select--inline`]: inline,\n      [`${prefix}--multi-select--readonly`]: readOnly,\n      [`${prefix}--multi-select--selected`]: selectedItemsCount > 0,\n    });\n  }\n\n  protected compareItems = (itemA, itemB, { locale }) => {\n    itemA.localeCompare(itemB, locale, { numeric: true });\n  };\n\n  protected sortItems = (\n    menuItems: NodeList,\n    { values, compareItems, locale = 'en' }\n  ) => {\n    const menuItemsArray = Array.from(menuItems);\n\n    const sortedArray = menuItemsArray.sort((itemA, itemB) => {\n      const hasItemA = values.includes((itemA as HTMLInputElement).value);\n      const hasItemB = values.includes((itemB as HTMLInputElement).value);\n\n      // Prefer whichever item is in the `value` array first\n      if (hasItemA && !hasItemB) {\n        return -1;\n      }\n\n      if (hasItemB && !hasItemA) {\n        return 1;\n      }\n\n      return compareItems(\n        (itemA as HTMLInputElement).value,\n        (itemB as HTMLInputElement).value,\n        {\n          locale,\n        }\n      );\n    });\n\n    return sortedArray;\n  };\n\n  shouldUpdate(changedProperties) {\n    const { selectorItem, slugItem } = this\n      .constructor as typeof CDSMultiSelect;\n    const slug = this.querySelector(slugItem);\n    const items = this.querySelectorAll(selectorItem);\n\n    const { value, locale } = this;\n    const values = !value ? [] : value.split(',');\n\n    if (changedProperties.has('size')) {\n      forEach(this.querySelectorAll(selectorItem), (elem) => {\n        (elem as CDSMultiSelectItem).size = this.size;\n      });\n    }\n    if (changedProperties.has('value')) {\n      // Updates selection beforehand because our rendering logic for `<cds-multi-select>` looks for selected items via `qSA()`\n      forEach(items, (elem) => {\n        (elem as CDSMultiSelectItem).selected =\n          values.indexOf((elem as CDSMultiSelectItem).value) >= 0;\n      });\n      this._selectedItemsCount = filter(\n        items,\n        (elem) => values.indexOf((elem as CDSMultiSelectItem).value) >= 0\n      ).length;\n\n      if (this.selectionFeedback === SELECTION_FEEDBACK_OPTION.TOP) {\n        const sortedMenuItems = this.sortItems(items, {\n          values,\n          compareItems: this.compareItems,\n          locale,\n        });\n\n        slug ? sortedMenuItems.unshift(slug as Node) : '';\n        // @todo remove typecast once we've updated to Typescript.\n        (this as any).replaceChildren(...sortedMenuItems);\n      }\n    }\n    if (changedProperties.has('open')) {\n      if (\n        this.selectionFeedback === SELECTION_FEEDBACK_OPTION.TOP_AFTER_REOPEN\n      ) {\n        const sortedMenuItems = this.sortItems(items, {\n          values,\n          compareItems: this.compareItems,\n          locale,\n        });\n\n        slug ? sortedMenuItems.unshift(slug as Node) : '';\n        // @todo remove typecast once we've updated to Typescript.\n        (this as any).replaceChildren(...sortedMenuItems);\n      }\n    }\n    return true;\n  }\n\n  updated(changedProperties) {\n    super.updated(changedProperties);\n    if (changedProperties.has('open') && this.open && !this.filterable) {\n      // move focus to menu body when open for non-filterable mulit-select\n      this._menuBodyNode.focus();\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    /**\n     * Detect if multi-select already has initially selected items\n     */\n    this.value = filter(\n      this.querySelectorAll(\n        (this.constructor as typeof CDSMultiSelect).selectorItem\n      ),\n      (item) => (item as CDSMultiSelectItem).selected\n    )\n      .map((item) => (item as CDSMultiSelectItem).value)\n      .join(',');\n  }\n\n  /**\n   * A selector that will return menu body.\n   */\n  static get selectorMenuBody() {\n    return `div[part=\"menu-body\"]`;\n  }\n\n  /**\n   * A selector that will return highlighted items.\n   */\n  static get selectorItemHighlighted() {\n    return `${prefix}-multi-select-item[highlighted]`;\n  }\n\n  /**\n   * A selector that will return multi select items.\n   * We use a separate property from `.itemTagName` due to the nature in difference of tag name vs. selector.\n   */\n  static get selectorItem() {\n    return `${prefix}-multi-select-item`;\n  }\n\n  /**\n   * A selector that will return remaining items after a filter.\n   */\n  static get selectorItemFiltered() {\n    return `${prefix}-multi-select-item[filtered]`;\n  }\n\n  /**\n   * A selector that will return remaining items after a filter.\n   */\n  static get selectorItemResults() {\n    return `${prefix}-multi-select-item:not([filtered])`;\n  }\n\n  /**\n   * A selector that will return selected items.\n   */\n  static get selectorItemSelected() {\n    return `${prefix}-multi-select-item[selected]`;\n  }\n\n  /**\n   * The name of the custom event fired before this multi select item is being toggled upon a user gesture.\n   * Cancellation of this event stops the user-initiated action of toggling this multi select item.\n   */\n  static get eventBeforeToggle() {\n    return `${prefix}-multi-select-beingtoggled`;\n  }\n\n  /**\n   * The name of the custom event fired after this multi select item is toggled upon a user gesture.\n   */\n  static get eventToggle() {\n    return `${prefix}-multi-select-toggled`;\n  }\n\n  /**\n   * The name of the custom event fired before a multi select item is selected upon a user gesture.\n   * Cancellation of this event stops changing the user-initiated selection.\n   */\n  static get eventBeforeSelect() {\n    return `${prefix}-multi-select-beingselected`;\n  }\n\n  /**\n   * The name of the custom event fired after a a multi select item is selected upon a user gesture.\n   */\n  static get eventSelect() {\n    return `${prefix}-multi-select-selected`;\n  }\n\n  static styles = styles;\n}\n\nexport default CDSMultiSelect;\n"],"mappings":"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","ignoreList":[]}