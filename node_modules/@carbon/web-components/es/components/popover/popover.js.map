{"version":3,"file":"popover.js","names":["classMap","LitElement","html","property","query","carbonElement","customElement","prefix","styles","PopoverController","CDSPopover","_decorate","_initialize","_LitElement","constructor","args","F","d","kind","key","value","decorators","reflect","type","String","Boolean","_handleSlotChange","target","tabTip","component","assignedNodes","filter","node","nodeType","Node","TEXT_NODE","textContent","trim","classList","add","requestUpdate","updated","changedProperties","selectorPopoverContent","forEach","name","has","querySelector","autoalign","open","_content$shadowRoot","_content$shadowRoot2","button","_triggerSlotNode","assignedElements","content","_contentSlotNode","tooltip","shadowRoot","selectorPopoverContentClass","arrowElement","selectorPopoverCaret","_this$popoverControll","popoverController","setPlacement","trigger","caret","undefined","flip","alignment","align","render","dropShadow","highContrast","handleSlotChange","classes","_t","_","static"],"sources":["components/popover/popover.ts"],"sourcesContent":["/**\n * @license\n *\n * Copyright IBM Corp. 2019, 2024\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { classMap } from 'lit/directives/class-map.js';\nimport { LitElement, html } from 'lit';\nimport { property, query } from 'lit/decorators.js';\nimport { carbonElement as customElement } from '../../globals/decorators/carbon-element';\nimport { prefix } from '../../globals/settings';\nimport styles from './popover.scss';\nimport CDSPopoverContent from './popover-content';\nimport PopoverController from '../../globals/controllers/popover-controller';\n\n/**\n * Popover.\n *\n * @element cds-popover\n */\n@customElement(`${prefix}-popover`)\nclass CDSPopover extends LitElement {\n  /**\n   * Create popover controller instance\n   */\n  private popoverController = new PopoverController(this);\n\n  /**\n   * The `<slot>` element in the shadow DOM.\n   */\n  @query('slot')\n  private _triggerSlotNode!: HTMLSlotElement;\n\n  /**\n   * The `<slot>` element in the shadow DOM.\n   */\n  @query('slot[name=\"content\"]')\n  private _contentSlotNode!: HTMLSlotElement;\n\n  /**\n   * Specify direction of alignment\n   */\n  @property({ reflect: true, type: String })\n  align = '';\n\n  /**\n   * Specify whether a auto align functionality should be applied\n   */\n  @property({ type: Boolean, reflect: true })\n  autoalign = false;\n\n  /**\n   * Specify whether a caret should be rendered\n   */\n  @property({ type: Boolean, reflect: true })\n  caret = true;\n\n  /**\n   * Specify whether a dropShadow should be rendered\n   */\n  @property({ type: Boolean, reflect: true })\n  dropShadow = true;\n\n  /**\n   * Render the component using the high-contrast variant\n   */\n  @property({ type: Boolean, reflect: true })\n  highContrast = false;\n\n  /**\n   * Specify whether the component is currently open or closed\n   */\n  @property({ type: Boolean, reflect: true })\n  open = false;\n\n  /**\n   * Render the component using the tab tip variant\n   */\n  @property({ type: Boolean, reflect: true })\n  tabTip = false;\n\n  /**\n   * Handles `slotchange` event.\n   */\n  protected _handleSlotChange({ target }: Event) {\n    if (this.tabTip) {\n      const component = (target as HTMLSlotElement)\n        .assignedNodes()\n        .filter(\n          (node) =>\n            node.nodeType !== Node.TEXT_NODE || node!.textContent!.trim()\n        );\n      (component[0] as HTMLElement).classList.add(\n        `${prefix}--popover--tab-tip__button`\n      );\n    }\n    this.requestUpdate();\n  }\n\n  updated(changedProperties) {\n    const { selectorPopoverContent } = this.constructor as typeof CDSPopover;\n    ['open', 'align', 'autoalign', 'caret', 'dropShadow', 'tabTip'].forEach(\n      (name) => {\n        if (changedProperties.has(name)) {\n          const { [name as keyof CDSPopover]: value } = this;\n          if (this.querySelector(selectorPopoverContent) as CDSPopoverContent) {\n            (this.querySelector(selectorPopoverContent) as CDSPopoverContent)[\n              name\n            ] = value;\n          }\n        }\n      }\n    );\n\n    if (this.autoalign && this.open) {\n      // auto align functionality with @floating-ui/dom library\n      const button = this._triggerSlotNode.assignedElements()[0];\n      const content = this._contentSlotNode.assignedElements()[0];\n\n      const tooltip = content?.shadowRoot?.querySelector(\n        CDSPopover.selectorPopoverContentClass\n      );\n      const arrowElement = content?.shadowRoot?.querySelector(\n        CDSPopover.selectorPopoverCaret\n      );\n\n      if (button && tooltip) {\n        this.popoverController?.setPlacement({\n          trigger: button as HTMLElement,\n          target: tooltip as HTMLElement,\n          arrowElement:\n            this.caret && arrowElement\n              ? (arrowElement as HTMLElement)\n              : undefined,\n          caret: this.caret,\n          flip: true,\n          alignment: this.align,\n        });\n      }\n    }\n  }\n\n  render() {\n    const {\n      dropShadow,\n      highContrast,\n      open,\n      tabTip,\n      _handleSlotChange: handleSlotChange,\n    } = this;\n    if (tabTip) {\n      this.caret = tabTip ? false : true;\n    }\n    this.align = this.align ? this.align : tabTip ? 'bottom-left' : 'bottom';\n\n    const classes = classMap({\n      [`${prefix}--popover-container`]: true,\n      [`${prefix}--popover--caret`]: this.caret,\n      [`${prefix}--popover--drop-shadow`]: dropShadow,\n      [`${prefix}--popover--high-contrast`]: highContrast,\n      [`${prefix}--popover--open`]: open,\n      [`${prefix}--popover--${this.align}`]: true,\n      [`${prefix}--popover--tab-tip`]: tabTip,\n    });\n    return html`\n    <span class=\"${classes}\">\n      <slot @slotchange=\"${handleSlotChange}\"></slot>\n      <slot name=\"content\"><slot>\n    </span>\n    `;\n  }\n\n  /**\n   * A selector that will return popover content element within\n   * CDSPopoverContent's shadowRoot.\n   */\n  static get selectorPopoverContentClass() {\n    return `.${prefix}--popover-content`;\n  }\n\n  /**\n   * A selector that will return popover caret element within\n   * CDSPopoverContent's shadowRoot.\n   */\n  static get selectorPopoverCaret() {\n    return `.${prefix}--popover-caret`;\n  }\n\n  /**\n   * A selector that will return the CDSPopoverContent.\n   */\n  static get selectorPopoverContent() {\n    return `${prefix}-popover-content`;\n  }\n\n  static styles = styles; // `styles` here is a `CSSResult` generated by custom WebPack loader\n}\n\nexport default CDSPopover;\n"],"mappings":"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","ignoreList":[]}